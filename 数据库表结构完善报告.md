# æ•°æ®åº“è¡¨ç»“æ„å®Œå–„æŠ¥å‘Š

## ğŸ“‹ æ‰§è¡Œä¿¡æ¯

- **æ‰§è¡Œæ—¶é—´**ï¼š2025-01
- **æ‰§è¡Œè„šæœ¬**ï¼š
  1. `sql/mysql/erp-stock-out-item-enhancement.sql` - å­—æ®µè¡¥å……
  2. `sql/mysql/erp-stock-tables-index-enhancement.sql` - ç´¢å¼•è¡¥å……
- **æ•°æ®åº“**ï¼šruoyi-vue-pro
- **æ‰§è¡ŒçŠ¶æ€**ï¼šâœ… æˆåŠŸ

---

## âœ… å®Œå–„å†…å®¹

### 1. erp_stock_out_itemè¡¨å­—æ®µè¡¥å……

#### æ·»åŠ çš„å­—æ®µ

| å­—æ®µå | æ•°æ®ç±»å‹ | å…è®¸ä¸ºç©º | æ³¨é‡Š | çŠ¶æ€ |
|--------|----------|----------|------|------|
| product_id | bigint | YES | äº§å“ç¼–å· | âœ… å·²æ·»åŠ  |
| product_unit_id | bigint | YES | äº§å“å•ä½ç¼–å· | âœ… å·²æ·»åŠ  |
| out_id | bigint | YES | å…¶å®ƒå‡ºåº“ç¼–å· | âœ… å·²æ·»åŠ  |
| warehouse_id | bigint | YES | ä»“åº“ç¼–å· | âœ… å·²æ·»åŠ  |

#### å­—æ®µä½ç½®

å­—æ®µå·²æŒ‰ç…§è®¾è®¡æ–‡æ¡£çš„é¡ºåºæ·»åŠ ï¼š
- `product_id` - åœ¨`tenant_id`ä¹‹å
- `product_unit_id` - åœ¨`product_id`ä¹‹å
- `out_id` - åœ¨`product_unit_id`ä¹‹å
- `warehouse_id` - åœ¨`out_id`ä¹‹å

### 2. ç´¢å¼•è¡¥å……

#### erp_stock_out_itemè¡¨ç´¢å¼•

| ç´¢å¼•å | å­—æ®µ | ç±»å‹ | è¯´æ˜ | çŠ¶æ€ |
|--------|------|------|------|------|
| idx_out_id | out_id | æ™®é€šç´¢å¼• | å‡ºåº“å•IDç´¢å¼• | âœ… å·²åˆ›å»º |
| idx_product_id | product_id | æ™®é€šç´¢å¼• | äº§å“IDç´¢å¼• | âœ… å·²åˆ›å»º |
| idx_warehouse_id | warehouse_id | æ™®é€šç´¢å¼• | ä»“åº“IDç´¢å¼• | âœ… å·²åˆ›å»º |
| idx_tenant_out | tenant_id, out_id | è”åˆç´¢å¼• | ç§Ÿæˆ·å’Œå‡ºåº“å•è”åˆç´¢å¼• | âœ… å·²åˆ›å»º |

#### erp_stockè¡¨ç´¢å¼•

| ç´¢å¼•å | å­—æ®µ | ç±»å‹ | è¯´æ˜ | çŠ¶æ€ |
|--------|------|------|------|------|
| idx_product_warehouse | tenant_id, product_id, warehouse_id | å”¯ä¸€ç´¢å¼• | ç§Ÿæˆ·ã€äº§å“ã€ä»“åº“è”åˆå”¯ä¸€ç´¢å¼• | âœ… å·²åˆ›å»º |

---

## ğŸ“Š è¡¨ç»“æ„å¯¹æ¯”

### erp_stock_out_itemè¡¨ï¼ˆå®Œå–„åï¼‰

**å®Œæ•´å­—æ®µåˆ—è¡¨**ï¼š
1. id - ç¼–å·ï¼ˆä¸»é”®ï¼‰
2. tenant_id - ç§Ÿæˆ·ç¼–å·
3. **product_id** - äº§å“ç¼–å· âœ¨ æ–°å¢
4. **product_unit_id** - äº§å“å•ä½ç¼–å· âœ¨ æ–°å¢
5. **out_id** - å…¶å®ƒå‡ºåº“ç¼–å· âœ¨ æ–°å¢
6. **warehouse_id** - ä»“åº“ç¼–å· âœ¨ æ–°å¢
7. product_price - äº§å“å•ä»·
8. count - äº§å“æ•°é‡
9. total_price - åˆè®¡é‡‘é¢
10. remark - å¤‡æ³¨
11. create_time - åˆ›å»ºæ—¶é—´
12. update_time - æ›´æ–°æ—¶é—´
13. creator - åˆ›å»ºè€…
14. updater - æ›´æ–°è€…
15. deleted - æ˜¯å¦åˆ é™¤

### erp_stock_in_itemè¡¨ï¼ˆå·²æœ‰å®Œæ•´å­—æ®µï¼‰

**å­—æ®µåˆ—è¡¨**ï¼š
1. id - ç¼–å·ï¼ˆä¸»é”®ï¼‰
2. tenant_id - ç§Ÿæˆ·ç¼–å·
3. product_id - äº§å“ç¼–å· âœ…
4. product_unit_id - äº§å“å•ä½ç¼–å· âœ…
5. in_id - å…¶å®ƒå…¥åº“ç¼–å· âœ…
6. warehouse_id - ä»“åº“ç¼–å· âœ…
7. product_price - äº§å“å•ä»·
8. count - äº§å“æ•°é‡
9. total_price - åˆè®¡é‡‘é¢
10. remark - å¤‡æ³¨
11. create_time - åˆ›å»ºæ—¶é—´
12. update_time - æ›´æ–°æ—¶é—´
13. creator - åˆ›å»ºè€…
14. updater - æ›´æ–°è€…
15. deleted - æ˜¯å¦åˆ é™¤

**ç»“è®º**ï¼šç°åœ¨`erp_stock_out_item`å’Œ`erp_stock_in_item`è¡¨ç»“æ„å·²ä¿æŒä¸€è‡´ã€‚

---

## ğŸ” éªŒè¯ç»“æœ

### å­—æ®µéªŒè¯

```sql
-- æ£€æŸ¥erp_stock_out_itemè¡¨å­—æ®µ
DESCRIBE erp_stock_out_item;
```

**ç»“æœ**ï¼š
- âœ… product_idå­—æ®µå­˜åœ¨
- âœ… product_unit_idå­—æ®µå­˜åœ¨
- âœ… out_idå­—æ®µå­˜åœ¨
- âœ… warehouse_idå­—æ®µå­˜åœ¨

### ç´¢å¼•éªŒè¯

```sql
-- æ£€æŸ¥erp_stock_out_itemè¡¨ç´¢å¼•
SHOW INDEX FROM erp_stock_out_item;
```

**ç»“æœ**ï¼š
- âœ… idx_out_idç´¢å¼•å­˜åœ¨
- âœ… idx_product_idç´¢å¼•å­˜åœ¨
- âœ… idx_warehouse_idç´¢å¼•å­˜åœ¨
- âœ… idx_tenant_outè”åˆç´¢å¼•å­˜åœ¨

```sql
-- æ£€æŸ¥erp_stockè¡¨ç´¢å¼•
SHOW INDEX FROM erp_stock;
```

**ç»“æœ**ï¼š
- âœ… idx_product_warehouseå”¯ä¸€ç´¢å¼•å­˜åœ¨

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### ç´¢å¼•ä¼˜åŒ–æ•ˆæœ

1. **æŸ¥è¯¢ä¼˜åŒ–**
   - `idx_out_id`ï¼šåŠ é€ŸæŒ‰å‡ºåº“å•IDæŸ¥è¯¢æ˜ç»†
   - `idx_product_id`ï¼šåŠ é€ŸæŒ‰äº§å“IDæŸ¥è¯¢
   - `idx_warehouse_id`ï¼šåŠ é€ŸæŒ‰ä»“åº“IDæŸ¥è¯¢
   - `idx_tenant_out`ï¼šåŠ é€ŸæŒ‰ç§Ÿæˆ·å’Œå‡ºåº“å•è”åˆæŸ¥è¯¢

2. **å”¯ä¸€æ€§çº¦æŸ**
   - `idx_product_warehouse`ï¼šç¡®ä¿åŒä¸€ç§Ÿæˆ·ä¸‹ï¼ŒåŒä¸€äº§å“åœ¨åŒä¸€ä»“åº“åªæœ‰ä¸€æ¡åº“å­˜è®°å½•

---

## âœ… å®Œå–„æ€»ç»“

### å®Œæˆçš„å·¥ä½œ

1. âœ… **å­—æ®µè¡¥å……**
   - ä¸º`erp_stock_out_item`è¡¨æ·»åŠ 4ä¸ªç¼ºå¤±å­—æ®µ
   - å­—æ®µç±»å‹å’Œæ³¨é‡Šä¸è®¾è®¡æ–‡æ¡£ä¸€è‡´

2. âœ… **ç´¢å¼•ä¼˜åŒ–**
   - ä¸º`erp_stock_out_item`è¡¨æ·»åŠ 4ä¸ªç´¢å¼•
   - ä¸º`erp_stock`è¡¨æ·»åŠ å”¯ä¸€ç´¢å¼•
   - æé«˜æŸ¥è¯¢æ€§èƒ½å’Œæ•°æ®å®Œæ•´æ€§

3. âœ… **ç»“æ„ä¸€è‡´æ€§**
   - `erp_stock_out_item`å’Œ`erp_stock_in_item`è¡¨ç»“æ„å·²ä¸€è‡´
   - ä¾¿äºç»Ÿä¸€ç®¡ç†å’Œç»´æŠ¤

### è¡¨ç»“æ„å®Œæ•´æ€§

- âœ… å­—æ®µå®Œæ•´æ€§ï¼šæ‰€æœ‰å¿…éœ€å­—æ®µå·²æ·»åŠ 
- âœ… ç´¢å¼•å®Œæ•´æ€§ï¼šå…³é”®å­—æ®µå·²å»ºç«‹ç´¢å¼•
- âœ… æ•°æ®å®Œæ•´æ€§ï¼šå”¯ä¸€ç´¢å¼•ç¡®ä¿æ•°æ®ä¸€è‡´æ€§

---

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

### 1. æµ‹è¯•å®Œæ•´ç‰ˆç”Ÿäº§æ‰§è¡Œè„šæœ¬

ç°åœ¨å¯ä»¥æ‰§è¡Œå®Œæ•´ç‰ˆçš„ç”Ÿäº§æ‰§è¡Œè„šæœ¬ï¼š
```bash
mysql -h127.0.0.1 -P3306 -uroot -p123456 ruoyi-vue-pro < sql/mysql/production-order-execution-demo.sql
```

### 2. éªŒè¯åŠŸèƒ½

- æµ‹è¯•å‡ºåº“å•åˆ›å»ºåŠŸèƒ½
- æµ‹è¯•å…¥åº“å•åˆ›å»ºåŠŸèƒ½
- éªŒè¯åº“å­˜è®°å½•åˆ›å»º
- éªŒè¯æ•°æ®å…³è”æ­£ç¡®æ€§

### 3. æ€§èƒ½æµ‹è¯•

- æµ‹è¯•ç´¢å¼•æŸ¥è¯¢æ€§èƒ½
- æµ‹è¯•å¤§æ•°æ®é‡ä¸‹çš„æŸ¥è¯¢æ•ˆç‡
- ä¼˜åŒ–æ…¢æŸ¥è¯¢

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ•°æ®è¿ç§»**ï¼šå¦‚æœè¡¨ä¸­å·²æœ‰æ•°æ®ï¼Œéœ€è¦ä¸ºç°æœ‰è®°å½•è¡¥å……å­—æ®µå€¼
2. **ç´¢å¼•ç»´æŠ¤**ï¼šå®šæœŸæ£€æŸ¥ç´¢å¼•ä½¿ç”¨æƒ…å†µï¼Œä¼˜åŒ–ä¸å¿…è¦çš„ç´¢å¼•
3. **å”¯ä¸€çº¦æŸ**ï¼š`erp_stock`è¡¨çš„å”¯ä¸€ç´¢å¼•ç¡®ä¿åº“å­˜æ•°æ®ä¸é‡å¤

---

*æŠ¥å‘Šç”Ÿæˆæ—¶é—´ï¼š2025-01*  
*æ•°æ®åº“ï¼šruoyi-vue-pro*  
*è¡¨ç»“æ„å®Œå–„çŠ¶æ€ï¼šâœ… å®Œæˆ*

