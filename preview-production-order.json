{
  "code": 0,
  "msg": "",
  "data": [
    {
      "filePath": "yudao-module-erp/src/main/java/cn/iocoder/yudao/module/erp/controller/admin/productionorder/vo/ProductionOrderPageReqVO.java",
      "code": "package cn.iocoder.yudao.module.erp.controller.admin.productionorder.vo;\n\nimport lombok.*;\nimport java.util.*;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport cn.iocoder.yudao.framework.common.pojo.PageParam;\nimport java.math.BigDecimal;\nimport org.springframework.format.annotation.DateTimeFormat;\nimport java.time.LocalDateTime;\n\nimport static cn.iocoder.yudao.framework.common.util.date.DateUtils.FORMAT_YEAR_MONTH_DAY_HOUR_MINUTE_SECOND;\n\n@Schema(description = \"管理后台 - ERP 生产订单 DO\n *分页 Request VO\")\n@Data\npublic class ProductionOrderPageReqVO extends PageParam {\n\n    @Schema(description = \"生产订单号\")\n    private String no;\n\n    @Schema(description = \"客户ID（关联销售订单）\", example = \"3753\")\n    private Long customerId;\n\n    @Schema(description = \"产品ID\", example = \"32079\")\n    private Long productId;\n\n    @Schema(description = \"产品名称\", example = \"芋艿\")\n    private String productName;\n\n    @Schema(description = \"产品规格\")\n    private String productSpec;\n\n    @Schema(description = \"单位ID\", example = \"16828\")\n    private Long unitId;\n\n    @Schema(description = \"生产数量\")\n    private BigDecimal quantity;\n\n    @Schema(description = \"已完成数量\")\n    private BigDecimal completedQuantity;\n\n    @Schema(description = \"计划开始时间\")\n    @DateTimeFormat(pattern = FORMAT_YEAR_MONTH_DAY_HOUR_MINUTE_SECOND)\n    private LocalDateTime[] startTime;\n\n    @Schema(description = \"计划完成时间\")\n    @DateTimeFormat(pattern = FORMAT_YEAR_MONTH_DAY_HOUR_MINUTE_SECOND)\n    private LocalDateTime[] endTime;\n\n    @Schema(description = \"实际开始时间\")\n    @DateTimeFormat(pattern = FORMAT_YEAR_MONTH_DAY_HOUR_MINUTE_SECOND)\n    private LocalDateTime[] actualStartTime;\n\n    @Schema(description = \"实际完成时间\")\n    @DateTimeFormat(pattern = FORMAT_YEAR_MONTH_DAY_HOUR_MINUTE_SECOND)\n    private LocalDateTime[] actualEndTime;\n\n    @Schema(description = \"状态：1-待开始，2-进行中，3-已暂停，4-已完成，5-已取消\", example = \"2\")\n    private Integer status;\n\n    @Schema(description = \"优先级：1-紧急，2-高，3-中，4-低\")\n    private Integer priority;\n\n    @Schema(description = \"来源类型：1-手动创建，2-销售订单，3-库存补充\", example = \"1\")\n    private Integer sourceType;\n\n    @Schema(description = \"来源单据ID\", example = \"10935\")\n    private Long sourceId;\n\n    @Schema(description = \"生产说明\", example = \"随便\")\n    private String description;\n\n    @Schema(description = \"备注\", example = \"随便\")\n    private String remark;\n\n    @Schema(description = \"创建时间\")\n    @DateTimeFormat(pattern = FORMAT_YEAR_MONTH_DAY_HOUR_MINUTE_SECOND)\n    private LocalDateTime[] createTime;\n\n}"
    },
    {
      "filePath": "yudao-module-erp/src/main/java/cn/iocoder/yudao/module/erp/controller/admin/productionorder/vo/ProductionOrderRespVO.java",
      "code": "package cn.iocoder.yudao.module.erp.controller.admin.productionorder.vo;\n\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport lombok.*;\nimport java.util.*;\nimport java.math.BigDecimal;\nimport org.springframework.format.annotation.DateTimeFormat;\nimport java.time.LocalDateTime;\nimport cn.idev.excel.annotation.*;\n\n@Schema(description = \"管理后台 - ERP 生产订单 DO\n * Response VO\")\n@Data\n@ExcelIgnoreUnannotated\npublic class ProductionOrderRespVO {\n\n    @Schema(description = \"编号\", requiredMode = Schema.RequiredMode.REQUIRED, example = \"26384\")\n    @ExcelProperty(\"编号\")\n    private Long id;\n\n    @Schema(description = \"生产订单号\", requiredMode = Schema.RequiredMode.REQUIRED)\n    @ExcelProperty(\"生产订单号\")\n    private String no;\n\n    @Schema(description = \"客户ID（关联销售订单）\", example = \"3753\")\n    @ExcelProperty(\"客户ID（关联销售订单）\")\n    private Long customerId;\n\n    @Schema(description = \"产品ID\", requiredMode = Schema.RequiredMode.REQUIRED, example = \"32079\")\n    @ExcelProperty(\"产品ID\")\n    private Long productId;\n\n    @Schema(description = \"产品名称\", requiredMode = Schema.RequiredMode.REQUIRED, example = \"芋艿\")\n    @ExcelProperty(\"产品名称\")\n    private String productName;\n\n    @Schema(description = \"产品规格\")\n    @ExcelProperty(\"产品规格\")\n    private String productSpec;\n\n    @Schema(description = \"单位ID\", example = \"16828\")\n    @ExcelProperty(\"单位ID\")\n    private Long unitId;\n\n    @Schema(description = \"生产数量\", requiredMode = Schema.RequiredMode.REQUIRED)\n    @ExcelProperty(\"生产数量\")\n    private BigDecimal quantity;\n\n    @Schema(description = \"已完成数量\")\n    @ExcelProperty(\"已完成数量\")\n    private BigDecimal completedQuantity;\n\n    @Schema(description = \"计划开始时间\")\n    @ExcelProperty(\"计划开始时间\")\n    private LocalDateTime startTime;\n\n    @Schema(description = \"计划完成时间\")\n    @ExcelProperty(\"计划完成时间\")\n    private LocalDateTime endTime;\n\n    @Schema(description = \"实际开始时间\")\n    @ExcelProperty(\"实际开始时间\")\n    private LocalDateTime actualStartTime;\n\n    @Schema(description = \"实际完成时间\")\n    @ExcelProperty(\"实际完成时间\")\n    private LocalDateTime actualEndTime;\n\n    @Schema(description = \"状态：1-待开始，2-进行中，3-已暂停，4-已完成，5-已取消\", requiredMode = Schema.RequiredMode.REQUIRED, example = \"2\")\n    @ExcelProperty(\"状态：1-待开始，2-进行中，3-已暂停，4-已完成，5-已取消\")\n    private Integer status;\n\n    @Schema(description = \"优先级：1-紧急，2-高，3-中，4-低\")\n    @ExcelProperty(\"优先级：1-紧急，2-高，3-中，4-低\")\n    private Integer priority;\n\n    @Schema(description = \"来源类型：1-手动创建，2-销售订单，3-库存补充\", example = \"1\")\n    @ExcelProperty(\"来源类型：1-手动创建，2-销售订单，3-库存补充\")\n    private Integer sourceType;\n\n    @Schema(description = \"来源单据ID\", example = \"10935\")\n    @ExcelProperty(\"来源单据ID\")\n    private Long sourceId;\n\n    @Schema(description = \"生产说明\", example = \"随便\")\n    @ExcelProperty(\"生产说明\")\n    private String description;\n\n    @Schema(description = \"备注\", example = \"随便\")\n    @ExcelProperty(\"备注\")\n    private String remark;\n\n    @Schema(description = \"创建时间\", requiredMode = Schema.RequiredMode.REQUIRED)\n    @ExcelProperty(\"创建时间\")\n    private LocalDateTime createTime;\n\n}"
    },
    {
      "filePath": "yudao-module-erp/src/main/java/cn/iocoder/yudao/module/erp/controller/admin/productionorder/vo/ProductionOrderSaveReqVO.java",
      "code": "package cn.iocoder.yudao.module.erp.controller.admin.productionorder.vo;\n\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport lombok.*;\nimport java.util.*;\nimport javax.validation.constraints.*;\nimport java.math.BigDecimal;\nimport org.springframework.format.annotation.DateTimeFormat;\nimport java.time.LocalDateTime;\n\n@Schema(description = \"管理后台 - ERP 生产订单 DO\n *新增/修改 Request VO\")\n@Data\npublic class ProductionOrderSaveReqVO {\n\n    @Schema(description = \"编号\", requiredMode = Schema.RequiredMode.REQUIRED, example = \"26384\")\n    private Long id;\n\n    @Schema(description = \"生产订单号\", requiredMode = Schema.RequiredMode.REQUIRED)\n    @NotEmpty(message = \"生产订单号不能为空\")\n    private String no;\n\n    @Schema(description = \"客户ID（关联销售订单）\", example = \"3753\")\n    private Long customerId;\n\n    @Schema(description = \"产品ID\", requiredMode = Schema.RequiredMode.REQUIRED, example = \"32079\")\n    @NotNull(message = \"产品ID不能为空\")\n    private Long productId;\n\n    @Schema(description = \"产品名称\", requiredMode = Schema.RequiredMode.REQUIRED, example = \"芋艿\")\n    @NotEmpty(message = \"产品名称不能为空\")\n    private String productName;\n\n    @Schema(description = \"产品规格\")\n    private String productSpec;\n\n    @Schema(description = \"单位ID\", example = \"16828\")\n    private Long unitId;\n\n    @Schema(description = \"生产数量\", requiredMode = Schema.RequiredMode.REQUIRED)\n    @NotNull(message = \"生产数量不能为空\")\n    private BigDecimal quantity;\n\n    @Schema(description = \"已完成数量\")\n    private BigDecimal completedQuantity;\n\n    @Schema(description = \"计划开始时间\")\n    private LocalDateTime startTime;\n\n    @Schema(description = \"计划完成时间\")\n    private LocalDateTime endTime;\n\n    @Schema(description = \"实际开始时间\")\n    private LocalDateTime actualStartTime;\n\n    @Schema(description = \"实际完成时间\")\n    private LocalDateTime actualEndTime;\n\n    @Schema(description = \"状态：1-待开始，2-进行中，3-已暂停，4-已完成，5-已取消\", requiredMode = Schema.RequiredMode.REQUIRED, example = \"2\")\n    @NotNull(message = \"状态：1-待开始，2-进行中，3-已暂停，4-已完成，5-已取消不能为空\")\n    private Integer status;\n\n    @Schema(description = \"优先级：1-紧急，2-高，3-中，4-低\")\n    private Integer priority;\n\n    @Schema(description = \"来源类型：1-手动创建，2-销售订单，3-库存补充\", example = \"1\")\n    private Integer sourceType;\n\n    @Schema(description = \"来源单据ID\", example = \"10935\")\n    private Long sourceId;\n\n    @Schema(description = \"生产说明\", example = \"随便\")\n    private String description;\n\n    @Schema(description = \"备注\", example = \"随便\")\n    private String remark;\n\n}"
    },
    {
      "filePath": "yudao-module-erp/src/main/java/cn/iocoder/yudao/module/erp/controller/admin/productionorder/ProductionOrderController.java",
      "code": "package cn.iocoder.yudao.module.erp.controller.admin.productionorder;\n\nimport org.springframework.web.bind.annotation.*;\nimport javax.annotation.Resource;\nimport org.springframework.validation.annotation.Validated;\nimport org.springframework.security.access.prepost.PreAuthorize;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.Operation;\n\nimport javax.validation.constraints.*;\nimport javax.validation.*;\nimport javax.servlet.http.*;\nimport java.util.*;\nimport java.io.IOException;\n\nimport cn.iocoder.yudao.framework.common.pojo.PageParam;\nimport cn.iocoder.yudao.framework.common.pojo.PageResult;\nimport cn.iocoder.yudao.framework.common.pojo.CommonResult;\nimport cn.iocoder.yudao.framework.common.util.object.BeanUtils;\nimport static cn.iocoder.yudao.framework.common.pojo.CommonResult.success;\n\nimport cn.iocoder.yudao.framework.excel.core.util.ExcelUtils;\n\nimport cn.iocoder.yudao.framework.apilog.core.annotation.ApiAccessLog;\nimport static cn.iocoder.yudao.framework.apilog.core.enums.OperateTypeEnum.*;\n\nimport cn.iocoder.yudao.module.erp.controller.admin.productionorder.vo.*;\nimport cn.iocoder.yudao.module.erp.dal.dataobject.productionorder.ProductionOrderDO;\nimport cn.iocoder.yudao.module.erp.service.productionorder.ProductionOrderService;\n\n@Tag(name = \"管理后台 - ERP 生产订单 DO\n *\")\n@RestController\n@RequestMapping(\"/erp/production-order\")\n@Validated\npublic class ProductionOrderController {\n\n    @Resource\n    private ProductionOrderService productionOrderService;\n\n    @PostMapping(\"/create\")\n    @Operation(summary = \"创建ERP 生产订单 DO\n *\")\n    @PreAuthorize(\"@ss.hasPermission('erp:production-order:create')\")\n    public CommonResult<Long> createProductionOrder(@Valid @RequestBody ProductionOrderSaveReqVO createReqVO) {\n        return success(productionOrderService.createProductionOrder(createReqVO));\n    }\n\n    @PutMapping(\"/update\")\n    @Operation(summary = \"更新ERP 生产订单 DO\n *\")\n    @PreAuthorize(\"@ss.hasPermission('erp:production-order:update')\")\n    public CommonResult<Boolean> updateProductionOrder(@Valid @RequestBody ProductionOrderSaveReqVO updateReqVO) {\n        productionOrderService.updateProductionOrder(updateReqVO);\n        return success(true);\n    }\n\n    @DeleteMapping(\"/delete\")\n    @Operation(summary = \"删除ERP 生产订单 DO\n *\")\n    @Parameter(name = \"id\", description = \"编号\", required = true)\n    @PreAuthorize(\"@ss.hasPermission('erp:production-order:delete')\")\n    public CommonResult<Boolean> deleteProductionOrder(@RequestParam(\"id\") Long id) {\n        productionOrderService.deleteProductionOrder(id);\n        return success(true);\n    }\n\n    @DeleteMapping(\"/delete-list\")\n    @Parameter(name = \"ids\", description = \"编号\", required = true)\n    @Operation(summary = \"批量删除ERP 生产订单 DO\n *\")\n                @PreAuthorize(\"@ss.hasPermission('erp:production-order:delete')\")\n    public CommonResult<Boolean> deleteProductionOrderList(@RequestParam(\"ids\") List<Long> ids) {\n        productionOrderService.deleteProductionOrderListByIds(ids);\n        return success(true);\n    }\n\n    @GetMapping(\"/get\")\n    @Operation(summary = \"获得ERP 生产订单 DO\n *\")\n    @Parameter(name = \"id\", description = \"编号\", required = true, example = \"1024\")\n    @PreAuthorize(\"@ss.hasPermission('erp:production-order:query')\")\n    public CommonResult<ProductionOrderRespVO> getProductionOrder(@RequestParam(\"id\") Long id) {\n        ProductionOrderDO productionOrder = productionOrderService.getProductionOrder(id);\n        return success(BeanUtils.toBean(productionOrder, ProductionOrderRespVO.class));\n    }\n\n    @GetMapping(\"/page\")\n    @Operation(summary = \"获得ERP 生产订单 DO\n *分页\")\n    @PreAuthorize(\"@ss.hasPermission('erp:production-order:query')\")\n    public CommonResult<PageResult<ProductionOrderRespVO>> getProductionOrderPage(@Valid ProductionOrderPageReqVO pageReqVO) {\n        PageResult<ProductionOrderDO> pageResult = productionOrderService.getProductionOrderPage(pageReqVO);\n        return success(BeanUtils.toBean(pageResult, ProductionOrderRespVO.class));\n    }\n\n    @GetMapping(\"/export-excel\")\n    @Operation(summary = \"导出ERP 生产订单 DO\n * Excel\")\n    @PreAuthorize(\"@ss.hasPermission('erp:production-order:export')\")\n    @ApiAccessLog(operateType = EXPORT)\n    public void exportProductionOrderExcel(@Valid ProductionOrderPageReqVO pageReqVO,\n              HttpServletResponse response) throws IOException {\n        pageReqVO.setPageSize(PageParam.PAGE_SIZE_NONE);\n        List<ProductionOrderDO> list = productionOrderService.getProductionOrderPage(pageReqVO).getList();\n        // 导出 Excel\n        ExcelUtils.write(response, \"ERP 生产订单 DO\n *.xls\", \"数据\", ProductionOrderRespVO.class,\n                        BeanUtils.toBean(list, ProductionOrderRespVO.class));\n    }\n\n}"
    },
    {
      "filePath": "yudao-module-erp/src/main/java/cn/iocoder/yudao/module/erp/dal/dataobject/productionorder/ProductionOrderDO.java",
      "code": "package cn.iocoder.yudao.module.erp.dal.dataobject.productionorder;\n\nimport lombok.*;\nimport java.util.*;\nimport java.math.BigDecimal;\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\nimport java.time.LocalDateTime;\nimport java.time.LocalDateTime;\nimport java.time.LocalDateTime;\nimport java.time.LocalDateTime;\nimport java.time.LocalDateTime;\nimport com.baomidou.mybatisplus.annotation.*;\nimport cn.iocoder.yudao.framework.mybatis.core.dataobject.BaseDO;\n\n/**\n * ERP 生产订单 DO\n * DO\n *\n * @author 芋道源码\n */\n@TableName(\"erp_production_order\")\n@KeySequence(\"erp_production_order_seq\") // 用于 Oracle、PostgreSQL、Kingbase、DB2、H2 数据库的主键自增。如果是 MySQL 等数据库，可不写。\n@Data\n@EqualsAndHashCode(callSuper = true)\n@ToString(callSuper = true)\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ProductionOrderDO extends BaseDO {\n\n    /**\n     * 编号\n     */\n    @TableId\n    private Long id;\n    /**\n     * 生产订单号\n     */\n    private String no;\n    /**\n     * 客户ID（关联销售订单）\n     */\n    private Long customerId;\n    /**\n     * 产品ID\n     */\n    private Long productId;\n    /**\n     * 产品名称\n     */\n    private String productName;\n    /**\n     * 产品规格\n     */\n    private String productSpec;\n    /**\n     * 单位ID\n     */\n    private Long unitId;\n    /**\n     * 生产数量\n     */\n    private BigDecimal quantity;\n    /**\n     * 已完成数量\n     */\n    private BigDecimal completedQuantity;\n    /**\n     * 计划开始时间\n     */\n    private LocalDateTime startTime;\n    /**\n     * 计划完成时间\n     */\n    private LocalDateTime endTime;\n    /**\n     * 实际开始时间\n     */\n    private LocalDateTime actualStartTime;\n    /**\n     * 实际完成时间\n     */\n    private LocalDateTime actualEndTime;\n    /**\n     * 状态：1-待开始，2-进行中，3-已暂停，4-已完成，5-已取消\n     */\n    private Integer status;\n    /**\n     * 优先级：1-紧急，2-高，3-中，4-低\n     */\n    private Integer priority;\n    /**\n     * 来源类型：1-手动创建，2-销售订单，3-库存补充\n     */\n    private Integer sourceType;\n    /**\n     * 来源单据ID\n     */\n    private Long sourceId;\n    /**\n     * 生产说明\n     */\n    private String description;\n    /**\n     * 备注\n     */\n    private String remark;\n\n\n}"
    },
    {
      "filePath": "yudao-module-erp/src/main/java/cn/iocoder/yudao/module/erp/dal/mysql/productionorder/ProductionOrderMapper.java",
      "code": "package cn.iocoder.yudao.module.erp.dal.mysql.productionorder;\n\nimport java.util.*;\n\nimport cn.iocoder.yudao.framework.common.pojo.PageResult;\nimport cn.iocoder.yudao.framework.mybatis.core.query.LambdaQueryWrapperX;\nimport cn.iocoder.yudao.framework.mybatis.core.mapper.BaseMapperX;\nimport cn.iocoder.yudao.module.erp.dal.dataobject.productionorder.ProductionOrderDO;\nimport org.apache.ibatis.annotations.Mapper;\nimport cn.iocoder.yudao.module.erp.controller.admin.productionorder.vo.*;\n\n/**\n * ERP 生产订单 DO\n * Mapper\n *\n * @author 芋道源码\n */\n@Mapper\npublic interface ProductionOrderMapper extends BaseMapperX<ProductionOrderDO> {\n\n    default PageResult<ProductionOrderDO> selectPage(ProductionOrderPageReqVO reqVO) {\n        return selectPage(reqVO, new LambdaQueryWrapperX<ProductionOrderDO>()\n                .eqIfPresent(ProductionOrderDO::getNo, reqVO.getNo())\n                .eqIfPresent(ProductionOrderDO::getCustomerId, reqVO.getCustomerId())\n                .eqIfPresent(ProductionOrderDO::getProductId, reqVO.getProductId())\n                .likeIfPresent(ProductionOrderDO::getProductName, reqVO.getProductName())\n                .eqIfPresent(ProductionOrderDO::getProductSpec, reqVO.getProductSpec())\n                .eqIfPresent(ProductionOrderDO::getUnitId, reqVO.getUnitId())\n                .eqIfPresent(ProductionOrderDO::getQuantity, reqVO.getQuantity())\n                .eqIfPresent(ProductionOrderDO::getCompletedQuantity, reqVO.getCompletedQuantity())\n                .betweenIfPresent(ProductionOrderDO::getStartTime, reqVO.getStartTime())\n                .betweenIfPresent(ProductionOrderDO::getEndTime, reqVO.getEndTime())\n                .betweenIfPresent(ProductionOrderDO::getActualStartTime, reqVO.getActualStartTime())\n                .betweenIfPresent(ProductionOrderDO::getActualEndTime, reqVO.getActualEndTime())\n                .eqIfPresent(ProductionOrderDO::getStatus, reqVO.getStatus())\n                .eqIfPresent(ProductionOrderDO::getPriority, reqVO.getPriority())\n                .eqIfPresent(ProductionOrderDO::getSourceType, reqVO.getSourceType())\n                .eqIfPresent(ProductionOrderDO::getSourceId, reqVO.getSourceId())\n                .eqIfPresent(ProductionOrderDO::getDescription, reqVO.getDescription())\n                .eqIfPresent(ProductionOrderDO::getRemark, reqVO.getRemark())\n                .betweenIfPresent(ProductionOrderDO::getCreateTime, reqVO.getCreateTime())\n                .orderByDesc(ProductionOrderDO::getId));\n    }\n\n}"
    },
    {
      "filePath": "yudao-module-erp/src/main/resources/mapper/productionorder/ProductionOrderMapper.xml",
      "code": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"cn.iocoder.yudao.module.erp.dal.mysql.productionorder.ProductionOrderMapper\">\n\n    <!--\n        一般情况下，尽可能使用 Mapper 进行 CRUD 增删改查即可。\n        无法满足的场景，例如说多表关联查询，才使用 XML 编写 SQL。\n        代码生成器暂时只生成 Mapper XML 文件本身，更多推荐 MybatisX 快速开发插件来生成查询。\n        文档可见：https://www.iocoder.cn/MyBatis/x-plugins/\n     -->\n\n</mapper>"
    },
    {
      "filePath": "yudao-module-erp/src/main/java/cn/iocoder/yudao/module/erp/service/productionorder/ProductionOrderServiceImpl.java",
      "code": "package cn.iocoder.yudao.module.erp.service.productionorder;\n\nimport cn.hutool.core.collection.CollUtil;\nimport org.springframework.stereotype.Service;\nimport javax.annotation.Resource;\nimport org.springframework.validation.annotation.Validated;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.util.*;\nimport cn.iocoder.yudao.module.erp.controller.admin.productionorder.vo.*;\nimport cn.iocoder.yudao.module.erp.dal.dataobject.productionorder.ProductionOrderDO;\nimport cn.iocoder.yudao.framework.common.pojo.PageResult;\nimport cn.iocoder.yudao.framework.common.pojo.PageParam;\nimport cn.iocoder.yudao.framework.common.util.object.BeanUtils;\n\nimport cn.iocoder.yudao.module.erp.dal.mysql.productionorder.ProductionOrderMapper;\n\nimport static cn.iocoder.yudao.framework.common.exception.util.ServiceExceptionUtil.exception;\nimport static cn.iocoder.yudao.framework.common.util.collection.CollectionUtils.convertList;\nimport static cn.iocoder.yudao.framework.common.util.collection.CollectionUtils.diffList;\nimport static cn.iocoder.yudao.module.erp.enums.ErrorCodeConstants.*;\n\n/**\n * ERP 生产订单 DO\n * Service 实现类\n *\n * @author 芋道源码\n */\n@Service\n@Validated\npublic class ProductionOrderServiceImpl implements ProductionOrderService {\n\n    @Resource\n    private ProductionOrderMapper productionOrderMapper;\n\n    @Override\n    public Long createProductionOrder(ProductionOrderSaveReqVO createReqVO) {\n        // 插入\n        ProductionOrderDO productionOrder = BeanUtils.toBean(createReqVO, ProductionOrderDO.class);\n        productionOrderMapper.insert(productionOrder);\n\n        // 返回\n        return productionOrder.getId();\n    }\n\n    @Override\n    public void updateProductionOrder(ProductionOrderSaveReqVO updateReqVO) {\n        // 校验存在\n        validateProductionOrderExists(updateReqVO.getId());\n        // 更新\n        ProductionOrderDO updateObj = BeanUtils.toBean(updateReqVO, ProductionOrderDO.class);\n        productionOrderMapper.updateById(updateObj);\n    }\n\n    @Override\n    public void deleteProductionOrder(Long id) {\n        // 校验存在\n        validateProductionOrderExists(id);\n        // 删除\n        productionOrderMapper.deleteById(id);\n    }\n\n    @Override\n        public void deleteProductionOrderListByIds(List<Long> ids) {\n        // 删除\n        productionOrderMapper.deleteByIds(ids);\n        }\n\n\n    private void validateProductionOrderExists(Long id) {\n        if (productionOrderMapper.selectById(id) == null) {\n            throw exception(PRODUCTION_ORDER_NOT_EXISTS);\n        }\n    }\n\n    @Override\n    public ProductionOrderDO getProductionOrder(Long id) {\n        return productionOrderMapper.selectById(id);\n    }\n\n    @Override\n    public PageResult<ProductionOrderDO> getProductionOrderPage(ProductionOrderPageReqVO pageReqVO) {\n        return productionOrderMapper.selectPage(pageReqVO);\n    }\n\n}"
    },
    {
      "filePath": "yudao-module-erp/src/main/java/cn/iocoder/yudao/module/erp/service/productionorder/ProductionOrderService.java",
      "code": "package cn.iocoder.yudao.module.erp.service.productionorder;\n\nimport java.util.*;\nimport javax.validation.*;\nimport cn.iocoder.yudao.module.erp.controller.admin.productionorder.vo.*;\nimport cn.iocoder.yudao.module.erp.dal.dataobject.productionorder.ProductionOrderDO;\nimport cn.iocoder.yudao.framework.common.pojo.PageResult;\nimport cn.iocoder.yudao.framework.common.pojo.PageParam;\n\n/**\n * ERP 生产订单 DO\n * Service 接口\n *\n * @author 芋道源码\n */\npublic interface ProductionOrderService {\n\n    /**\n     * 创建ERP 生产订单 DO\n *\n     *\n     * @param createReqVO 创建信息\n     * @return 编号\n     */\n    Long createProductionOrder(@Valid ProductionOrderSaveReqVO createReqVO);\n\n    /**\n     * 更新ERP 生产订单 DO\n *\n     *\n     * @param updateReqVO 更新信息\n     */\n    void updateProductionOrder(@Valid ProductionOrderSaveReqVO updateReqVO);\n\n    /**\n     * 删除ERP 生产订单 DO\n *\n     *\n     * @param id 编号\n     */\n    void deleteProductionOrder(Long id);\n\n    /**\n    * 批量删除ERP 生产订单 DO\n *\n    *\n    * @param ids 编号\n    */\n    void deleteProductionOrderListByIds(List<Long> ids);\n\n    /**\n     * 获得ERP 生产订单 DO\n *\n     *\n     * @param id 编号\n     * @return ERP 生产订单 DO\n *\n     */\n    ProductionOrderDO getProductionOrder(Long id);\n\n    /**\n     * 获得ERP 生产订单 DO\n *分页\n     *\n     * @param pageReqVO 分页查询\n     * @return ERP 生产订单 DO\n *分页\n     */\n    PageResult<ProductionOrderDO> getProductionOrderPage(ProductionOrderPageReqVO pageReqVO);\n\n}"
    },
    {
      "filePath": "yudao-module-erp/src/main/java/cn/iocoder/yudao/module/erp/enums/ErrorCodeConstants_手动操作.java",
      "code": "// TODO 待办：请将下面的错误码复制到 yudao-module-erp 模块的 ErrorCodeConstants 类中。注意，请给“TODO 补充编号”设置一个错误码编号！！！\n// ========== ERP 生产订单 DO\n * TODO 补充编号 ==========\nErrorCode PRODUCTION_ORDER_NOT_EXISTS = new ErrorCode(TODO 补充编号, \"ERP 生产订单 DO\n *不存在\");"
    },
    {
      "filePath": "sql/sql.sql",
      "code": "-- 菜单 SQL\nINSERT INTO system_menu(\n    name, permission, type, sort, parent_id,\n    path, icon, component, status, component_name\n)\nVALUES (\n    'ERP 生产订单 DO\n *管理', '', 2, 0, ${table.parentMenuId},\n    'production-order', '', 'erp/productionorder/index', 0, 'ProductionOrder'\n);\n\n-- 按钮父菜单ID\n-- 暂时只支持 MySQL。如果你是 Oracle、PostgreSQL、SQLServer 的话，需要手动修改 @parentId 的部分的代码\nSELECT @parentId := LAST_INSERT_ID();\n\n-- 按钮 SQL\nINSERT INTO system_menu(\n    name, permission, type, sort, parent_id,\n    path, icon, component, status\n)\nVALUES (\n    'ERP 生产订单 DO\n *查询', 'erp:production-order:query', 3, 1, @parentId,\n    '', '', '', 0\n);\nINSERT INTO system_menu(\n    name, permission, type, sort, parent_id,\n    path, icon, component, status\n)\nVALUES (\n    'ERP 生产订单 DO\n *创建', 'erp:production-order:create', 3, 2, @parentId,\n    '', '', '', 0\n);\nINSERT INTO system_menu(\n    name, permission, type, sort, parent_id,\n    path, icon, component, status\n)\nVALUES (\n    'ERP 生产订单 DO\n *更新', 'erp:production-order:update', 3, 3, @parentId,\n    '', '', '', 0\n);\nINSERT INTO system_menu(\n    name, permission, type, sort, parent_id,\n    path, icon, component, status\n)\nVALUES (\n    'ERP 生产订单 DO\n *删除', 'erp:production-order:delete', 3, 4, @parentId,\n    '', '', '', 0\n);\nINSERT INTO system_menu(\n    name, permission, type, sort, parent_id,\n    path, icon, component, status\n)\nVALUES (\n    'ERP 生产订单 DO\n *导出', 'erp:production-order:export', 3, 5, @parentId,\n    '', '', '', 0\n);"
    },
    {
      "filePath": "yudao-ui-admin-vue3/src/views/erp/productionorder/index.vue",
      "code": "<template>\n  <ContentWrap>\n    <!-- 搜索工作栏 -->\n    <el-form\n      class=\"-mb-15px\"\n      :model=\"queryParams\"\n      ref=\"queryFormRef\"\n      :inline=\"true\"\n      label-width=\"68px\"\n    >\n      <el-form-item label=\"生产订单号\" prop=\"no\">\n        <el-input\n          v-model=\"queryParams.no\"\n          placeholder=\"请输入生产订单号\"\n          clearable\n          @keyup.enter=\"handleQuery\"\n          class=\"!w-240px\"\n        />\n      </el-form-item>\n      <el-form-item label=\"客户ID（关联销售订单）\" prop=\"customerId\">\n        <el-input\n          v-model=\"queryParams.customerId\"\n          placeholder=\"请输入客户ID（关联销售订单）\"\n          clearable\n          @keyup.enter=\"handleQuery\"\n          class=\"!w-240px\"\n        />\n      </el-form-item>\n      <el-form-item label=\"产品ID\" prop=\"productId\">\n        <el-input\n          v-model=\"queryParams.productId\"\n          placeholder=\"请输入产品ID\"\n          clearable\n          @keyup.enter=\"handleQuery\"\n          class=\"!w-240px\"\n        />\n      </el-form-item>\n      <el-form-item label=\"产品名称\" prop=\"productName\">\n        <el-input\n          v-model=\"queryParams.productName\"\n          placeholder=\"请输入产品名称\"\n          clearable\n          @keyup.enter=\"handleQuery\"\n          class=\"!w-240px\"\n        />\n      </el-form-item>\n      <el-form-item label=\"产品规格\" prop=\"productSpec\">\n        <el-input\n          v-model=\"queryParams.productSpec\"\n          placeholder=\"请输入产品规格\"\n          clearable\n          @keyup.enter=\"handleQuery\"\n          class=\"!w-240px\"\n        />\n      </el-form-item>\n      <el-form-item label=\"单位ID\" prop=\"unitId\">\n        <el-input\n          v-model=\"queryParams.unitId\"\n          placeholder=\"请输入单位ID\"\n          clearable\n          @keyup.enter=\"handleQuery\"\n          class=\"!w-240px\"\n        />\n      </el-form-item>\n      <el-form-item label=\"生产数量\" prop=\"quantity\">\n        <el-input\n          v-model=\"queryParams.quantity\"\n          placeholder=\"请输入生产数量\"\n          clearable\n          @keyup.enter=\"handleQuery\"\n          class=\"!w-240px\"\n        />\n      </el-form-item>\n      <el-form-item label=\"已完成数量\" prop=\"completedQuantity\">\n        <el-input\n          v-model=\"queryParams.completedQuantity\"\n          placeholder=\"请输入已完成数量\"\n          clearable\n          @keyup.enter=\"handleQuery\"\n          class=\"!w-240px\"\n        />\n      </el-form-item>\n      <el-form-item label=\"计划开始时间\" prop=\"startTime\">\n        <el-date-picker\n          v-model=\"queryParams.startTime\"\n          value-format=\"YYYY-MM-DD HH:mm:ss\"\n          type=\"daterange\"\n          start-placeholder=\"开始日期\"\n          end-placeholder=\"结束日期\"\n          :default-time=\"[new Date('1 00:00:00'), new Date('1 23:59:59')]\"\n          class=\"!w-220px\"\n        />\n      </el-form-item>\n      <el-form-item label=\"计划完成时间\" prop=\"endTime\">\n        <el-date-picker\n          v-model=\"queryParams.endTime\"\n          value-format=\"YYYY-MM-DD HH:mm:ss\"\n          type=\"daterange\"\n          start-placeholder=\"开始日期\"\n          end-placeholder=\"结束日期\"\n          :default-time=\"[new Date('1 00:00:00'), new Date('1 23:59:59')]\"\n          class=\"!w-220px\"\n        />\n      </el-form-item>\n      <el-form-item label=\"实际开始时间\" prop=\"actualStartTime\">\n        <el-date-picker\n          v-model=\"queryParams.actualStartTime\"\n          value-format=\"YYYY-MM-DD HH:mm:ss\"\n          type=\"daterange\"\n          start-placeholder=\"开始日期\"\n          end-placeholder=\"结束日期\"\n          :default-time=\"[new Date('1 00:00:00'), new Date('1 23:59:59')]\"\n          class=\"!w-220px\"\n        />\n      </el-form-item>\n      <el-form-item label=\"实际完成时间\" prop=\"actualEndTime\">\n        <el-date-picker\n          v-model=\"queryParams.actualEndTime\"\n          value-format=\"YYYY-MM-DD HH:mm:ss\"\n          type=\"daterange\"\n          start-placeholder=\"开始日期\"\n          end-placeholder=\"结束日期\"\n          :default-time=\"[new Date('1 00:00:00'), new Date('1 23:59:59')]\"\n          class=\"!w-220px\"\n        />\n      </el-form-item>\n      <el-form-item label=\"状态：1-待开始，2-进行中，3-已暂停，4-已完成，5-已取消\" prop=\"status\">\n        <el-select\n          v-model=\"queryParams.status\"\n          placeholder=\"请选择状态：1-待开始，2-进行中，3-已暂停，4-已完成，5-已取消\"\n          clearable\n          class=\"!w-240px\"\n        >\n          <el-option label=\"请选择字典生成\" value=\"\" />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"优先级：1-紧急，2-高，3-中，4-低\" prop=\"priority\">\n        <el-input\n          v-model=\"queryParams.priority\"\n          placeholder=\"请输入优先级：1-紧急，2-高，3-中，4-低\"\n          clearable\n          @keyup.enter=\"handleQuery\"\n          class=\"!w-240px\"\n        />\n      </el-form-item>\n      <el-form-item label=\"来源类型：1-手动创建，2-销售订单，3-库存补充\" prop=\"sourceType\">\n        <el-select\n          v-model=\"queryParams.sourceType\"\n          placeholder=\"请选择来源类型：1-手动创建，2-销售订单，3-库存补充\"\n          clearable\n          class=\"!w-240px\"\n        >\n          <el-option label=\"请选择字典生成\" value=\"\" />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"来源单据ID\" prop=\"sourceId\">\n        <el-input\n          v-model=\"queryParams.sourceId\"\n          placeholder=\"请输入来源单据ID\"\n          clearable\n          @keyup.enter=\"handleQuery\"\n          class=\"!w-240px\"\n        />\n      </el-form-item>\n      <el-form-item label=\"备注\" prop=\"remark\">\n        <el-input\n          v-model=\"queryParams.remark\"\n          placeholder=\"请输入备注\"\n          clearable\n          @keyup.enter=\"handleQuery\"\n          class=\"!w-240px\"\n        />\n      </el-form-item>\n      <el-form-item label=\"创建时间\" prop=\"createTime\">\n        <el-date-picker\n          v-model=\"queryParams.createTime\"\n          value-format=\"YYYY-MM-DD HH:mm:ss\"\n          type=\"daterange\"\n          start-placeholder=\"开始日期\"\n          end-placeholder=\"结束日期\"\n          :default-time=\"[new Date('1 00:00:00'), new Date('1 23:59:59')]\"\n          class=\"!w-220px\"\n        />\n      </el-form-item>\n      <el-form-item>\n        <el-button @click=\"handleQuery\"><Icon icon=\"ep:search\" class=\"mr-5px\" /> 搜索</el-button>\n        <el-button @click=\"resetQuery\"><Icon icon=\"ep:refresh\" class=\"mr-5px\" /> 重置</el-button>\n        <el-button\n          type=\"primary\"\n          plain\n          @click=\"openForm('create')\"\n          v-hasPermi=\"['erp:production-order:create']\"\n        >\n          <Icon icon=\"ep:plus\" class=\"mr-5px\" /> 新增\n        </el-button>\n        <el-button\n          type=\"success\"\n          plain\n          @click=\"handleExport\"\n          :loading=\"exportLoading\"\n          v-hasPermi=\"['erp:production-order:export']\"\n        >\n          <Icon icon=\"ep:download\" class=\"mr-5px\" /> 导出\n        </el-button>\n        <el-button\n            type=\"danger\"\n            plain\n            :disabled=\"isEmpty(checkedIds)\"\n            @click=\"handleDeleteBatch\"\n            v-hasPermi=\"['erp:production-order:delete']\"\n        >\n          <Icon icon=\"ep:delete\" class=\"mr-5px\" /> 批量删除\n        </el-button>\n      </el-form-item>\n    </el-form>\n  </ContentWrap>\n\n  <!-- 列表 -->\n  <ContentWrap>\n    <el-table\n        row-key=\"id\"\n        v-loading=\"loading\"\n        :data=\"list\"\n        :stripe=\"true\"\n        :show-overflow-tooltip=\"true\"\n        @selection-change=\"handleRowCheckboxChange\"\n    >\n    <el-table-column type=\"selection\" width=\"55\" />\n      <el-table-column label=\"编号\" align=\"center\" prop=\"id\" />\n      <el-table-column label=\"生产订单号\" align=\"center\" prop=\"no\" />\n      <el-table-column label=\"客户ID（关联销售订单）\" align=\"center\" prop=\"customerId\" />\n      <el-table-column label=\"产品ID\" align=\"center\" prop=\"productId\" />\n      <el-table-column label=\"产品名称\" align=\"center\" prop=\"productName\" />\n      <el-table-column label=\"产品规格\" align=\"center\" prop=\"productSpec\" />\n      <el-table-column label=\"单位ID\" align=\"center\" prop=\"unitId\" />\n      <el-table-column label=\"生产数量\" align=\"center\" prop=\"quantity\" />\n      <el-table-column label=\"已完成数量\" align=\"center\" prop=\"completedQuantity\" />\n      <el-table-column\n        label=\"计划开始时间\"\n        align=\"center\"\n        prop=\"startTime\"\n        :formatter=\"dateFormatter\"\n        width=\"180px\"\n      />\n      <el-table-column\n        label=\"计划完成时间\"\n        align=\"center\"\n        prop=\"endTime\"\n        :formatter=\"dateFormatter\"\n        width=\"180px\"\n      />\n      <el-table-column\n        label=\"实际开始时间\"\n        align=\"center\"\n        prop=\"actualStartTime\"\n        :formatter=\"dateFormatter\"\n        width=\"180px\"\n      />\n      <el-table-column\n        label=\"实际完成时间\"\n        align=\"center\"\n        prop=\"actualEndTime\"\n        :formatter=\"dateFormatter\"\n        width=\"180px\"\n      />\n      <el-table-column label=\"状态：1-待开始，2-进行中，3-已暂停，4-已完成，5-已取消\" align=\"center\" prop=\"status\" />\n      <el-table-column label=\"优先级：1-紧急，2-高，3-中，4-低\" align=\"center\" prop=\"priority\" />\n      <el-table-column label=\"来源类型：1-手动创建，2-销售订单，3-库存补充\" align=\"center\" prop=\"sourceType\" />\n      <el-table-column label=\"来源单据ID\" align=\"center\" prop=\"sourceId\" />\n      <el-table-column label=\"生产说明\" align=\"center\" prop=\"description\" />\n      <el-table-column label=\"备注\" align=\"center\" prop=\"remark\" />\n      <el-table-column\n        label=\"创建时间\"\n        align=\"center\"\n        prop=\"createTime\"\n        :formatter=\"dateFormatter\"\n        width=\"180px\"\n      />\n      <el-table-column label=\"操作\" align=\"center\" min-width=\"120px\">\n        <template #default=\"scope\">\n          <el-button\n            link\n            type=\"primary\"\n            @click=\"openForm('update', scope.row.id)\"\n            v-hasPermi=\"['erp:production-order:update']\"\n          >\n            编辑\n          </el-button>\n          <el-button\n            link\n            type=\"danger\"\n            @click=\"handleDelete(scope.row.id)\"\n            v-hasPermi=\"['erp:production-order:delete']\"\n          >\n            删除\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!-- 分页 -->\n    <Pagination\n      :total=\"total\"\n      v-model:page=\"queryParams.pageNo\"\n      v-model:limit=\"queryParams.pageSize\"\n      @pagination=\"getList\"\n    />\n  </ContentWrap>\n\n  <!-- 表单弹窗：添加/修改 -->\n  <ProductionOrderForm ref=\"formRef\" @success=\"getList\" />\n</template>\n\n<script setup lang=\"ts\">\nimport { isEmpty } from '@/utils/is'\nimport { dateFormatter } from '@/utils/formatTime'\nimport download from '@/utils/download'\nimport { ProductionOrderApi, ProductionOrder } from '@/api/erp/productionorder'\nimport ProductionOrderForm from './ProductionOrderForm.vue'\n\n/** ERP 生产订单 DO\n * 列表 */\ndefineOptions({ name: 'ProductionOrder' })\n\nconst message = useMessage() // 消息弹窗\nconst { t } = useI18n() // 国际化\n\nconst loading = ref(true) // 列表的加载中\nconst list = ref<ProductionOrder[]>([]) // 列表的数据\nconst total = ref(0) // 列表的总页数\nconst queryParams = reactive({\n  pageNo: 1,\n  pageSize: 10,\n  no: undefined,\n  customerId: undefined,\n  productId: undefined,\n  productName: undefined,\n  productSpec: undefined,\n  unitId: undefined,\n  quantity: undefined,\n  completedQuantity: undefined,\n  startTime: [],\n  endTime: [],\n  actualStartTime: [],\n  actualEndTime: [],\n  status: undefined,\n  priority: undefined,\n  sourceType: undefined,\n  sourceId: undefined,\n  description: undefined,\n  remark: undefined,\n  createTime: []\n})\nconst queryFormRef = ref() // 搜索的表单\nconst exportLoading = ref(false) // 导出的加载中\n\n/** 查询列表 */\nconst getList = async () => {\n  loading.value = true\n  try {\n    const data = await ProductionOrderApi.getProductionOrderPage(queryParams)\n    list.value = data.list\n    total.value = data.total\n  } finally {\n    loading.value = false\n  }\n}\n\n/** 搜索按钮操作 */\nconst handleQuery = () => {\n  queryParams.pageNo = 1\n  getList()\n}\n\n/** 重置按钮操作 */\nconst resetQuery = () => {\n  queryFormRef.value.resetFields()\n  handleQuery()\n}\n\n/** 添加/修改操作 */\nconst formRef = ref()\nconst openForm = (type: string, id?: number) => {\n  formRef.value.open(type, id)\n}\n\n/** 删除按钮操作 */\nconst handleDelete = async (id: number) => {\n  try {\n    // 删除的二次确认\n    await message.delConfirm()\n    // 发起删除\n    await ProductionOrderApi.deleteProductionOrder(id)\n    message.success(t('common.delSuccess'))\n    currentRow.value = {}\n    // 刷新列表\n    await getList()\n  } catch {}\n}\n\n/** 批量删除ERP 生产订单 DO\n * */\nconst handleDeleteBatch = async () => {\n  try {\n    // 删除的二次确认\n    await message.delConfirm()\n    await ProductionOrderApi.deleteProductionOrderList(checkedIds.value);\n    checkedIds.value = [];\n    message.success(t('common.delSuccess'))\n    await getList();\n  } catch {}\n}\n\nconst checkedIds = ref<number[]>([])\nconst handleRowCheckboxChange = (records: ProductionOrder[]) => {\n  checkedIds.value = records.map((item) => item.id!);\n}\n\n/** 导出按钮操作 */\nconst handleExport = async () => {\n  try {\n    // 导出的二次确认\n    await message.exportConfirm()\n    // 发起导出\n    exportLoading.value = true\n    const data = await ProductionOrderApi.exportProductionOrder(queryParams)\n    download.excel(data, 'ERP 生产订单 DO\n *.xls')\n  } catch {\n  } finally {\n    exportLoading.value = false\n  }\n}\n\n/** 初始化 **/\nonMounted(() => {\n  getList()\n})\n</script>"
    },
    {
      "filePath": "yudao-ui-admin-vue3/src/views/erp/productionorder/ProductionOrderForm.vue",
      "code": "<template>\n  <Dialog :title=\"dialogTitle\" v-model=\"dialogVisible\">\n    <el-form\n      ref=\"formRef\"\n      :model=\"formData\"\n      :rules=\"formRules\"\n      label-width=\"100px\"\n      v-loading=\"formLoading\"\n    >\n      <el-form-item label=\"生产订单号\" prop=\"no\">\n        <el-input v-model=\"formData.no\" placeholder=\"请输入生产订单号\" />\n      </el-form-item>\n      <el-form-item label=\"客户ID（关联销售订单）\" prop=\"customerId\">\n        <el-input v-model=\"formData.customerId\" placeholder=\"请输入客户ID（关联销售订单）\" />\n      </el-form-item>\n      <el-form-item label=\"产品ID\" prop=\"productId\">\n        <el-input v-model=\"formData.productId\" placeholder=\"请输入产品ID\" />\n      </el-form-item>\n      <el-form-item label=\"产品名称\" prop=\"productName\">\n        <el-input v-model=\"formData.productName\" placeholder=\"请输入产品名称\" />\n      </el-form-item>\n      <el-form-item label=\"产品规格\" prop=\"productSpec\">\n        <el-input v-model=\"formData.productSpec\" placeholder=\"请输入产品规格\" />\n      </el-form-item>\n      <el-form-item label=\"单位ID\" prop=\"unitId\">\n        <el-input v-model=\"formData.unitId\" placeholder=\"请输入单位ID\" />\n      </el-form-item>\n      <el-form-item label=\"生产数量\" prop=\"quantity\">\n        <el-input v-model=\"formData.quantity\" placeholder=\"请输入生产数量\" />\n      </el-form-item>\n      <el-form-item label=\"已完成数量\" prop=\"completedQuantity\">\n        <el-input v-model=\"formData.completedQuantity\" placeholder=\"请输入已完成数量\" />\n      </el-form-item>\n      <el-form-item label=\"计划开始时间\" prop=\"startTime\">\n        <el-date-picker\n          v-model=\"formData.startTime\"\n          type=\"date\"\n          value-format=\"x\"\n          placeholder=\"选择计划开始时间\"\n        />\n      </el-form-item>\n      <el-form-item label=\"计划完成时间\" prop=\"endTime\">\n        <el-date-picker\n          v-model=\"formData.endTime\"\n          type=\"date\"\n          value-format=\"x\"\n          placeholder=\"选择计划完成时间\"\n        />\n      </el-form-item>\n      <el-form-item label=\"实际开始时间\" prop=\"actualStartTime\">\n        <el-date-picker\n          v-model=\"formData.actualStartTime\"\n          type=\"date\"\n          value-format=\"x\"\n          placeholder=\"选择实际开始时间\"\n        />\n      </el-form-item>\n      <el-form-item label=\"实际完成时间\" prop=\"actualEndTime\">\n        <el-date-picker\n          v-model=\"formData.actualEndTime\"\n          type=\"date\"\n          value-format=\"x\"\n          placeholder=\"选择实际完成时间\"\n        />\n      </el-form-item>\n      <el-form-item label=\"状态：1-待开始，2-进行中，3-已暂停，4-已完成，5-已取消\" prop=\"status\">\n        <el-radio-group v-model=\"formData.status\">\n          <el-radio value=\"1\">请选择字典生成</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"优先级：1-紧急，2-高，3-中，4-低\" prop=\"priority\">\n        <el-input v-model=\"formData.priority\" placeholder=\"请输入优先级：1-紧急，2-高，3-中，4-低\" />\n      </el-form-item>\n      <el-form-item label=\"来源类型：1-手动创建，2-销售订单，3-库存补充\" prop=\"sourceType\">\n        <el-select v-model=\"formData.sourceType\" placeholder=\"请选择来源类型：1-手动创建，2-销售订单，3-库存补充\">\n          <el-option label=\"请选择字典生成\" value=\"\" />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"来源单据ID\" prop=\"sourceId\">\n        <el-input v-model=\"formData.sourceId\" placeholder=\"请输入来源单据ID\" />\n      </el-form-item>\n      <el-form-item label=\"生产说明\" prop=\"description\">\n        <Editor v-model=\"formData.description\" height=\"150px\" />\n      </el-form-item>\n      <el-form-item label=\"备注\" prop=\"remark\">\n        <el-input v-model=\"formData.remark\" placeholder=\"请输入备注\" />\n      </el-form-item>\n    </el-form>\n    <template #footer>\n      <el-button @click=\"submitForm\" type=\"primary\" :disabled=\"formLoading\">确 定</el-button>\n      <el-button @click=\"dialogVisible = false\">取 消</el-button>\n    </template>\n  </Dialog>\n</template>\n<script setup lang=\"ts\">\nimport { ProductionOrderApi, ProductionOrder } from '@/api/erp/productionorder'\n\n/** ERP 生产订单 DO\n * 表单 */\ndefineOptions({ name: 'ProductionOrderForm' })\n\nconst { t } = useI18n() // 国际化\nconst message = useMessage() // 消息弹窗\n\nconst dialogVisible = ref(false) // 弹窗的是否展示\nconst dialogTitle = ref('') // 弹窗的标题\nconst formLoading = ref(false) // 表单的加载中：1）修改时的数据加载；2）提交的按钮禁用\nconst formType = ref('') // 表单的类型：create - 新增；update - 修改\nconst formData = ref({\n  id: undefined,\n  no: undefined,\n  customerId: undefined,\n  productId: undefined,\n  productName: undefined,\n  productSpec: undefined,\n  unitId: undefined,\n  quantity: undefined,\n  completedQuantity: undefined,\n  startTime: undefined,\n  endTime: undefined,\n  actualStartTime: undefined,\n  actualEndTime: undefined,\n  status: undefined,\n  priority: undefined,\n  sourceType: undefined,\n  sourceId: undefined,\n  description: undefined,\n  remark: undefined\n})\nconst formRules = reactive({\n  no: [{ required: true, message: '生产订单号不能为空', trigger: 'blur' }],\n  productId: [{ required: true, message: '产品ID不能为空', trigger: 'blur' }],\n  productName: [{ required: true, message: '产品名称不能为空', trigger: 'blur' }],\n  quantity: [{ required: true, message: '生产数量不能为空', trigger: 'blur' }],\n  status: [{ required: true, message: '状态：1-待开始，2-进行中，3-已暂停，4-已完成，5-已取消不能为空', trigger: 'blur' }]\n})\nconst formRef = ref() // 表单 Ref\n\n/** 打开弹窗 */\nconst open = async (type: string, id?: number) => {\n  dialogVisible.value = true\n  dialogTitle.value = t('action.' + type)\n  formType.value = type\n  resetForm()\n  // 修改时，设置数据\n  if (id) {\n    formLoading.value = true\n    try {\n      formData.value = await ProductionOrderApi.getProductionOrder(id)\n    } finally {\n      formLoading.value = false\n    }\n  }\n}\ndefineExpose({ open }) // 提供 open 方法，用于打开弹窗\n\n/** 提交表单 */\nconst emit = defineEmits(['success']) // 定义 success 事件，用于操作成功后的回调\nconst submitForm = async () => {\n  // 校验表单\n  await formRef.value.validate()\n  // 提交请求\n  formLoading.value = true\n  try {\n    const data = formData.value as unknown as ProductionOrder\n    if (formType.value === 'create') {\n      await ProductionOrderApi.createProductionOrder(data)\n      message.success(t('common.createSuccess'))\n    } else {\n      await ProductionOrderApi.updateProductionOrder(data)\n      message.success(t('common.updateSuccess'))\n    }\n    dialogVisible.value = false\n    // 发送操作成功的事件\n    emit('success')\n  } finally {\n    formLoading.value = false\n  }\n}\n\n/** 重置表单 */\nconst resetForm = () => {\n  formData.value = {\n    id: undefined,\n    no: undefined,\n    customerId: undefined,\n    productId: undefined,\n    productName: undefined,\n    productSpec: undefined,\n    unitId: undefined,\n    quantity: undefined,\n    completedQuantity: undefined,\n    startTime: undefined,\n    endTime: undefined,\n    actualStartTime: undefined,\n    actualEndTime: undefined,\n    status: undefined,\n    priority: undefined,\n    sourceType: undefined,\n    sourceId: undefined,\n    description: undefined,\n    remark: undefined\n  }\n  formRef.value?.resetFields()\n}\n</script>"
    },
    {
      "filePath": "yudao-ui-admin-vue3/src/api/erp/productionorder/index.ts",
      "code": "import request from '@/config/axios'\nimport type { Dayjs } from 'dayjs';\n\n/** ERP 生产订单 DO\n *信息 */\nexport interface ProductionOrder {\n          id: number; // 编号\n          no?: string; // 生产订单号\n          customerId: number; // 客户ID（关联销售订单）\n          productId?: number; // 产品ID\n          productName?: string; // 产品名称\n          productSpec: string; // 产品规格\n          unitId: number; // 单位ID\n          quantity?: number; // 生产数量\n          completedQuantity: number; // 已完成数量\n          startTime: string | Dayjs; // 计划开始时间\n          endTime: string | Dayjs; // 计划完成时间\n          actualStartTime: string | Dayjs; // 实际开始时间\n          actualEndTime: string | Dayjs; // 实际完成时间\n          status?: number; // 状态：1-待开始，2-进行中，3-已暂停，4-已完成，5-已取消\n          priority: number; // 优先级：1-紧急，2-高，3-中，4-低\n          sourceType: number; // 来源类型：1-手动创建，2-销售订单，3-库存补充\n          sourceId: number; // 来源单据ID\n          description: string; // 生产说明\n          remark: string; // 备注\n  }\n\n// ERP 生产订单 DO\n * API\nexport const ProductionOrderApi = {\n  // 查询ERP 生产订单 DO\n *分页\n  getProductionOrderPage: async (params: any) => {\n    return await request.get({ url: `/erp/production-order/page`, params })\n  },\n\n  // 查询ERP 生产订单 DO\n *详情\n  getProductionOrder: async (id: number) => {\n    return await request.get({ url: `/erp/production-order/get?id=` + id })\n  },\n\n  // 新增ERP 生产订单 DO\n *\n  createProductionOrder: async (data: ProductionOrder) => {\n    return await request.post({ url: `/erp/production-order/create`, data })\n  },\n\n  // 修改ERP 生产订单 DO\n *\n  updateProductionOrder: async (data: ProductionOrder) => {\n    return await request.put({ url: `/erp/production-order/update`, data })\n  },\n\n  // 删除ERP 生产订单 DO\n *\n  deleteProductionOrder: async (id: number) => {\n    return await request.delete({ url: `/erp/production-order/delete?id=` + id })\n  },\n\n  /** 批量删除ERP 生产订单 DO\n * */\n  deleteProductionOrderList: async (ids: number[]) => {\n    return await request.delete({ url: `/erp/production-order/delete-list?ids=${ids.join(',')}` })\n  },\n\n  // 导出ERP 生产订单 DO\n * Excel\n  exportProductionOrder: async (params) => {\n    return await request.download({ url: `/erp/production-order/export-excel`, params })\n  }\n}"
    }
  ]
}
