# 生产管理系统完整使用流程

## 📋 概述

本文档详细描述了ERP生产管理系统的完整使用流程，从基础数据准备到生产执行，再到数据分析的完整生命周期。

---

## 一、基础数据准备阶段

### 1. 产品管理
- **创建产品信息**
  - 产品名称、规格、单位等基本信息
  - 设置产品类型（原材料/半成品/成品）
  - 配置产品属性

### 2. BOM（物料清单）配置

#### 2.1 创建产品BOM
- 为成品创建BOM主表
- 关联父产品（成品）
- 设置BOM编号和名称

#### 2.2 配置BOM明细
- **添加子产品**（原材料/半成品）
- **设置物料用量**
  - 用量：每个成品需要的子产品数量
  - 损耗率：生产过程中的损耗比例
  - 有效用量：考虑损耗后的实际用量
- **物料属性设置**
  - 标记关键物料（是否关键物料）
  - 设置替代料（是否替代料、替代料组）
  - 设置位号（物料在BOM中的位置）
- **关联工序**
  - 指定物料在哪个工序使用（关联工艺路线明细）

### 3. 工艺路线配置

#### 3.1 创建工艺路线
- **基本信息**
  - 工艺路线编号和名称
  - 关联产品
  - 设置版本号
- **成本设置**
  - 标准周期时间
  - 标准人工成本
  - 标准制造费用
- **状态管理**
  - 设置工艺路线状态（启用/禁用）

#### 3.2 配置工艺路线明细（工序）
- **工序顺序**
  - 设置序号（决定工序执行顺序）
  - 工序名称
- **时间设置**
  - 标准工时：完成该工序的标准时间
  - 准备时间：工序开始前的准备时间
- **资源配置**
  - 分配设备（关联设备管理）
  - 设置工作中心
  - 配置人员数量
- **工序属性**
  - 标记瓶颈工序（是否瓶颈工序）
  - 设置是否需要质检
- **成本设置**
  - 人工费率
  - 制造费率
- **备注信息**
  - 添加工序说明和备注

---

## 二、生产订单创建阶段

### 4. 创建生产订单

#### 4.1 基本信息填写
- **订单信息**
  - 生产订单号（系统自动生成）
  - 选择客户（如关联销售订单）
  - 选择产品（必须已配置BOM和工艺路线）
  - 产品规格
  - 选择单位
- **数量设置**
  - 生产数量
  - 已完成数量（初始为0）
- **时间计划**
  - 计划开始时间
  - 计划完成时间
- **优先级设置**
  - 紧急、高、中、低
- **来源设置**
  - 来源类型：手动创建、销售订单、库存补充
  - 来源单据ID（如关联销售订单）
- **说明信息**
  - 生产说明
  - 备注

#### 4.2 系统自动处理
- 自动生成生产订单号
- 状态自动设置为"待开始"
- 自动关联产品的BOM和工艺路线
- 计算所需物料清单

---

## 三、生产准备阶段

### 5. 物料准备

#### 5.1 系统自动检查
- **物料需求计算**
  - 根据BOM自动计算所需物料
  - 考虑损耗率计算有效用量
  - 汇总所有工序所需物料
- **库存检查**
  - 检查原材料库存是否充足
  - 检查关键物料库存
  - 生成物料需求清单

#### 5.2 物料不足处理
- **创建采购订单**
  - 如库存不足，创建采购订单
  - 采购订单关联生产订单
  - 状态自动变为"配件采购中"
- **等待采购入库**
  - 跟踪采购订单状态
  - 等待物料入库
  - 物料入库后自动更新库存

### 6. 排产准备

#### 6.1 状态变更
- **手动变更状态**
  - 物料充足后，手动将状态改为"待排产"
- **系统验证**
  - 验证物料库存是否充足
  - 验证BOM和工艺路线是否完整
  - 验证设备和工作中心是否可用

#### 6.2 生产排程
- 根据工艺路线和资源情况
- 计算生产时间
- 安排生产计划

---

## 四、生产执行阶段

### 7. 开始生产

#### 7.1 原材料出库
- **创建出库单**
  - 根据BOM明细创建原材料出库单
  - 出库单关联生产订单
  - 记录出库数量和物料明细
- **状态自动变更**
  - 出库单创建后，状态自动变为"生产中"
  - 记录实际开始时间
  - 更新库存数量

### 8. 工序执行

#### 8.1 按工艺路线执行
- **开始工序**
  - 按工艺路线明细的序号顺序执行
  - 开始第一道工序
  - 记录工序开始时间
- **资源使用**
  - 使用指定的设备
  - 分配配置的人员
  - 在工作中心执行
- **时间记录**
  - 记录实际工时
  - 记录实际机时
  - 记录准备时间

#### 8.2 工序质检（如需要）
- **质检流程**
  - 如果工序设置了"需要质检"
  - 完成工序后进行质检
  - 记录质检结果
- **质量数据**
  - 记录合格数量
  - 记录不合格数量
  - 计算合格率

#### 8.3 工序完成
- **完成记录**
  - 记录工序完成时间
  - 更新工序状态
- **自动流转**
  - 自动流转到下一道工序
  - 更新生产进度

### 9. 半成品处理

#### 9.1 半成品入库
- **创建入库单**
  - 完成中间工序后，创建半成品入库单
  - 入库单关联生产订单
  - 记录半成品数量和规格
- **状态变更**
  - 半成品入库后，状态自动变为"包装中"
  - 更新半成品库存

### 10. 成品完成

#### 10.1 成品入库
- **创建成品入库单**
  - 完成所有工序后，创建成品入库单
  - 入库单关联生产订单
  - 记录成品数量和规格
- **状态自动变更**
  - 成品入库后，状态自动变为"生产完成-待销售"
  - 记录实际完成时间
  - 更新已完成数量
  - 更新成品库存

#### 10.2 数据更新
- **数量更新**
  - 更新生产订单的已完成数量
  - 计算完成率
- **成本计算**
  - 计算实际人工成本
  - 计算实际制造费用
  - 计算总成本

---

## 五、销售与完成阶段

### 11. 销售关联

#### 11.1 创建销售订单
- **关联生产订单**
  - 创建销售订单时关联生产订单
  - 销售订单自动关联成品
- **状态自动变更**
  - 销售订单创建后，状态自动变为"销售中"
  - 记录销售信息

### 12. 订单完成

#### 12.1 收款完成
- **创建收款单**
  - 收到客户款项后，创建收款单
  - 收款单关联销售订单和生产订单
- **状态自动变更**
  - 收款单创建后，状态自动变为"已完成"
  - 记录完成时间
  - 更新财务数据

---

## 六、监控与分析阶段

### 13. 生产报表

#### 13.1 报表类型
- **日报**：每日生产数据统计
- **周报**：每周生产数据汇总
- **月报**：每月生产数据汇总
- **年报**：每年生产数据汇总

#### 13.2 报表内容
- **订单统计**
  - 生产订单数
  - 总计划数量
  - 总完成数量
  - 总合格数量
- **效率指标**
  - 完成率：完成数量/计划数量
  - 合格率：合格数量/完成数量
  - 准时交付率：按时完成订单比例
- **时间统计**
  - 总工时：所有工序累计工时
  - 总机时：设备使用时间
  - OEE（设备综合效率）
- **成本分析**
  - 产值：生产价值
  - 平均成本：单位产品成本

### 14. 生产KPI监控

#### 14.1 KPI类型
- **OEE（设备综合效率）**
  - 衡量设备利用效率
  - 目标值 vs 实际值
- **合格率**
  - 产品质量指标
  - 合格数量/总数量
- **达成率**
  - 生产计划完成情况
  - 实际完成/计划完成
- **交期率**
  - 按时交付比例
  - 按时完成订单/总订单

#### 14.2 KPI分析
- **目标对比**
  - 对比目标值与实际值
  - 计算差异值和差异率
- **趋势分析**
  - 按统计周期分析趋势
  - 识别问题和改进点
- **分类统计**
  - 按工作中心统计
  - 按产品统计
  - 按时间周期统计

---

## 七、异常处理

### 15. 订单暂停/取消

#### 15.1 暂停生产
- **手动暂停**
  - 手动将状态改为"已暂停"
  - 记录暂停原因
  - 记录暂停时间
- **暂停处理**
  - 释放占用的设备资源
  - 处理已领用物料
  - 通知相关人员

#### 15.2 取消订单
- **手动取消**
  - 手动将状态改为"已取消"
  - 记录取消原因
  - 记录取消时间
- **取消处理**
  - 处理已领用物料（退库或转用）
  - 释放所有资源
  - 更新相关数据
  - 通知相关人员

---

## 八、流程关系图

```
┌─────────────┐
│  产品管理   │
└──────┬──────┘
       │
       ├─────────────────┐
       │                 │
       ▼                 ▼
┌─────────────┐   ┌─────────────┐
│  BOM配置    │   │ 工艺路线配置 │
└──────┬──────┘   └──────┬──────┘
       │                 │
       └────────┬────────┘
                │
                ▼
        ┌───────────────┐
        │  生产订单创建  │
        └───────┬───────┘
                │
                ▼
        ┌───────────────┐
        │   物料检查    │
        └───────┬───────┘
                │
        ┌───────┴───────┐
        │               │
        ▼               ▼
┌─────────────┐   ┌─────────────┐
│  库存充足   │   │  库存不足   │
│  待排产     │   │  采购订单   │
└──────┬──────┘   └──────┬──────┘
       │                 │
       │                 ▼
       │          ┌─────────────┐
       │          │  采购入库   │
       │          └──────┬──────┘
       │                 │
       └────────┬────────┘
                │
                ▼
        ┌───────────────┐
        │   生产中      │
        └───────┬───────┘
                │
                ▼
        ┌───────────────┐
        │  原材料出库   │
        └───────┬───────┘
                │
                ▼
        ┌───────────────┐
        │  工序执行     │
        │ (按工艺路线)  │
        └───────┬───────┘
                │
        ┌───────┴───────┐
        │               │
        ▼               ▼
┌─────────────┐   ┌─────────────┐
│  半成品入库 │   │  成品入库   │
│  包装中     │   │  生产完成   │
└──────┬──────┘   └──────┬──────┘
       │                 │
       └────────┬────────┘
                │
                ▼
        ┌───────────────┐
        │   销售订单    │
        │    销售中     │
        └───────┬───────┘
                │
                ▼
        ┌───────────────┐
        │    收款单     │
        │    已完成     │
        └───────┬───────┘
                │
                ▼
        ┌───────────────┐
        │  生产报表     │
        │  生产KPI      │
        └───────────────┘
```

---

## 九、关键业务规则

### 1. 状态流转规则
- **自动流转**：大部分状态根据业务操作自动流转
- **手动流转**：部分状态需要手动调整（如待排产、暂停、取消）
- **流转限制**：状态流转需符合业务规则，不能随意跳转

### 2. 物料检查规则
- **库存验证**：变更为"待排产"状态前，必须验证物料库存充足
- **关键物料**：关键物料必须充足才能开始生产
- **替代料**：可以使用替代料组中的物料

### 3. 工序执行规则
- **顺序执行**：必须按照工艺路线明细的序号顺序执行
- **前置条件**：上一道工序完成后才能开始下一道工序
- **质检要求**：设置了"需要质检"的工序必须完成质检

### 4. 数据关联规则
- **BOM关联**：生产订单必须关联产品的BOM
- **工艺路线关联**：生产订单必须关联产品的工艺路线
- **库存关联**：
  - **生产相关出入库**：与生产订单相关的出库单（如原材料领料出库）和入库单（如成品/半成品入库）需要关联生产订单
  - **其他类型出入库**：采购入库、销售出库、其它入库/出库、调拨、盘点等业务类型的出入库不需要关联生产订单，它们关联各自对应的业务单据（如采购订单、销售订单等）
- **销售关联**：销售订单可以关联生产订单
- **财务关联**：收款单关联销售订单和生产订单

### 5. 数据统计规则
- **自动统计**：系统自动统计工时、机时、合格率等指标
- **实时更新**：数据实时更新，保证准确性
- **历史记录**：保留历史数据，支持趋势分析

---

## 十、注意事项

### 1. 数据完整性
- 创建生产订单前，确保产品已配置完整的BOM和工艺路线
- 确保物料、设备、工作中心等基础数据完整

### 2. 状态管理
- 严格按照状态流转规则操作
- 及时更新订单状态，保证数据准确性
- 异常情况及时处理（暂停、取消）

### 3. 质量控制
- 严格按照工艺路线执行
- 需要质检的工序必须完成质检
- 记录质量数据，支持质量分析

### 4. 成本控制
- 记录实际工时和机时
- 跟踪实际成本，与标准成本对比
- 分析成本差异，优化生产流程

### 5. 数据分析
- 定期查看生产报表和KPI
- 分析生产效率和成本
- 识别问题和改进机会

---

## 十一、常见问题

### Q1: 如何创建生产订单？
**A:** 进入"生产订单"模块，点击"新增"按钮，填写订单信息（客户、产品、数量、时间等），系统会自动关联BOM和工艺路线。

### Q2: 物料不足怎么办？
**A:** 系统会自动检查库存，如果不足，需要先创建采购订单采购物料，物料入库后才能开始生产。

### Q3: 如何查看生产进度？
**A:** 可以在生产订单列表中查看订单状态和已完成数量，也可以查看生产报表了解整体生产情况。

### Q4: 工序可以跳过吗？
**A:** 不可以，必须按照工艺路线明细的序号顺序执行，不能跳过任何工序。

### Q5: 如何查看生产KPI？
**A:** 进入"生产KPI"模块，可以查看OEE、合格率、达成率、交期率等指标，支持按时间、产品、工作中心等维度筛选。

---

## 十二、总结

生产管理系统是一个完整的生产管理解决方案，涵盖了从基础数据准备、生产订单创建、生产执行到数据分析的全流程。通过规范化的流程管理和数据统计，帮助企业提高生产效率、控制成本、保证质量。

**核心价值：**
- ✅ 规范化生产流程
- ✅ 实时跟踪生产进度
- ✅ 精确控制成本
- ✅ 保证产品质量
- ✅ 数据驱动决策

---

*最后更新时间：2024年*
*文档版本：v1.0*

