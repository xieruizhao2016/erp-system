# ç”Ÿäº§å•ç®¡ç†æ¨¡å—å¼€å‘è®¡åˆ’ - é—®é¢˜è¡¥å……ä¸é£é™©åˆ†æ

## ğŸ” å‘ç°çš„é—®é¢˜ç‚¹ä¸é£é™©åˆ†æ

### 1. ç§Ÿæˆ·æ¨¡å¼æ•°æ®éš”ç¦»é£é™© ğŸš¨

#### 1.1 ç§Ÿæˆ·éš”ç¦»æœºåˆ¶
**ç°çŠ¶åˆ†æï¼š**
- ç°æœ‰ç³»ç»Ÿä½¿ç”¨ `BaseDO` åŸºç±»ï¼Œè‡ªåŠ¨åŒ…å« `tenant_id` å­—æ®µ
- æ‰€æœ‰ERPæ¨¡å—çš„è¡¨éƒ½åŒ…å« `tenant_id bigint NOT NULL DEFAULT 0` å­—æ®µ
- SQLæŸ¥è¯¢ä¸­ä½¿ç”¨ `${@cn.iocoder.yudao.framework.tenant.core.context.TenantContextHolder@getTenantId()}` å®ç°ç§Ÿæˆ·éš”ç¦»

**é£é™©ç‚¹ï¼š**
```sql
-- æ½œåœ¨çš„è·¨ç§Ÿæˆ·æ•°æ®æ³„éœ²é£é™©
SELECT p.*, i.*
FROM erp_production_order p
LEFT JOIN erp_production_order_item i ON p.id = i.production_order_id
WHERE p.deleted = 0;
-- å¦‚æœæ²¡æœ‰åœ¨JOINæ¡ä»¶ä¸­åŒ…å«tenant_idï¼Œå¯èƒ½å¯¼è‡´æ•°æ®æ³„éœ²
```

**è§£å†³æ–¹æ¡ˆï¼š**
```sql
-- æ‰€æœ‰JOINæŸ¥è¯¢å¿…é¡»åŒ…å«ç§Ÿæˆ·IDæ£€æŸ¥
SELECT p.*, i.*
FROM erp_production_order p
LEFT JOIN erp_production_order_item i ON p.id = i.production_order_id
    AND p.tenant_id = i.tenant_id
WHERE p.deleted = 0 AND p.tenant_id = ${@cn.iocoder.yudao.framework.tenant.core.context.TenantContextHolder@getTenantId()};
```

#### 1.2 æ•°æ®åº“è®¾è®¡ä¼˜åŒ–
```sql
-- ä¸ºç§Ÿæˆ·IDåˆ›å»ºå¤åˆç´¢å¼•
CREATE INDEX idx_production_order_tenant_id ON erp_production_order(tenant_id, status);
CREATE INDEX idx_production_item_tenant_id ON erp_production_order_item(tenant_id, production_order_id);

-- ç¡®ä¿æ‰€æœ‰å¤–é”®çº¦æŸè€ƒè™‘ç§Ÿæˆ·éš”ç¦»
-- åœ¨åº”ç”¨å±‚é¢å®ç°è·¨ç§Ÿæˆ·å¤–é”®çº¦æŸæ£€æŸ¥
```

### 2. æ•°æ®åº“è¡¨è®¾è®¡è¡¥å……

#### 2.1 ç”Ÿäº§å•ä¸»è¡¨ä¼˜åŒ–
```sql
ALTER TABLE `erp_production_order`
ADD COLUMN `priority` int DEFAULT 5 COMMENT 'ä¼˜å…ˆçº§ï¼š1-é«˜ï¼Œ3-ä¸­ï¼Œ5-ä½',
ADD COLUMN `production_user_id` bigint COMMENT 'ç”Ÿäº§è´Ÿè´£äººID',
ADD COLUMN `actual_start_time` datetime COMMENT 'å®é™…å¼€å§‹æ—¶é—´',
ADD COLUMN `actual_end_time` datetime COMMENT 'å®é™…ç»“æŸæ—¶é—´',
ADD COLUMN `progress_percentage` decimal(5,2) DEFAULT 0 COMMENT 'å®Œæˆè¿›åº¦ç™¾åˆ†æ¯”',
ADD COLUMN `estimated_hours` decimal(10,2) COMMENT 'é¢„è®¡å·¥æ—¶',
ADD COLUMN `actual_hours` decimal(10,2) DEFAULT 0 COMMENT 'å®é™…å·¥æ—¶',
ADD COLUMN `batch_no` varchar(50) COMMENT 'ç”Ÿäº§æ‰¹æ¬¡å·',
ADD COLUMN `production_type` int DEFAULT 1 COMMENT 'ç”Ÿäº§ç±»å‹ï¼š1-æ ‡å‡†ç”Ÿäº§ï¼Œ2-è¿”å·¥ï¼Œ3-æ ·å“ç”Ÿäº§';

-- å¢åŠ ç´¢å¼•
CREATE INDEX idx_production_order_priority ON erp_production_order(priority, status);
CREATE INDEX idx_production_order_user ON erp_production_order(production_user_id, status);
CREATE INDEX idx_production_order_batch ON erp_production_order(batch_no);
```

#### 2.2 ç”Ÿäº§å•æ˜ç»†è¡¨ä¼˜åŒ–
```sql
ALTER TABLE `erp_production_order_item`
ADD COLUMN `actual_count` decimal(20,2) DEFAULT 0 COMMENT 'å®é™…ä½¿ç”¨æ•°é‡',
ADD COLUMN `waste_count` decimal(20,2) DEFAULT 0 COMMENT 'æŸè€—æ•°é‡',
ADD COLUMN `quality_status` int DEFAULT 1 COMMENT 'è´¨é‡çŠ¶æ€ï¼š1-å¾…æ£€ï¼Œ2-åˆæ ¼ï¼Œ3-ä¸åˆæ ¼',
ADD COLUMN `unit_cost` decimal(20,2) COMMENT 'å•ä½æˆæœ¬',
ADD COLUMN `warehouse_id` bigint COMMENT 'ä»“åº“ID',
ADD COLUMN `location` varchar(100) COMMENT 'åº“ä½',
ADD COLUMN `batch_no` varchar(50) COMMENT 'ç‰©æ–™æ‰¹æ¬¡å·';

-- å¢åŠ ç´¢å¼•
CREATE INDEX idx_production_item_product ON erp_production_order_item(product_id, item_type);
CREATE INDEX idx_production_item_warehouse ON erp_production_order_item(warehouse_id);
CREATE INDEX idx_production_item_batch ON erp_production_order_item(batch_no);
```

### 3. é›†æˆæ¨¡å—æ•°æ®è¡¨ä¿®æ”¹

#### 3.1 é‡‡è´­ç®¡ç†é›†æˆ
```sql
-- é‡‡è´­è®¢å•å¢åŠ ç”Ÿäº§å•å…³è”
ALTER TABLE `erp_purchase_order`
ADD COLUMN `production_order_id` bigint COMMENT 'å…³è”çš„ç”Ÿäº§å•ID',
ADD INDEX idx_purchase_order_production ON erp_purchase_order(production_order_id);

-- é‡‡è´­è®¢å•æ˜ç»†å¢åŠ ç”Ÿäº§å•æ˜ç»†å…³è”
ALTER TABLE `erp_purchase_order_item`
ADD COLUMN `production_order_item_id` bigint COMMENT 'å…³è”çš„ç”Ÿäº§å•æ˜ç»†ID',
ADD INDEX idx_purchase_item_production ON erp_purchase_order_item(production_order_item_id);
```

#### 3.2 é”€å”®ç®¡ç†é›†ï¿½ï¿½
```sql
-- é”€å”®è®¢å•å¢åŠ ç”Ÿäº§å•å…³è”
ALTER TABLE `erp_sale_order`
ADD COLUMN `production_order_id` bigint COMMENT 'å…³è”çš„ç”Ÿäº§å•ID',
ADD INDEX idx_sale_order_production ON erp_sale_order(production_order_id);

-- é”€å”®è®¢å•æ˜ç»†å¢åŠ ç”Ÿäº§å•æ˜ç»†å…³è”
ALTER TABLE `erp_sale_order_item`
ADD COLUMN `production_order_item_id` bigint COMMENT 'å…³è”çš„ç”Ÿäº§å•æ˜ç»†ID',
ADD INDEX idx_sale_item_production ON erp_sale_order_item(production_order_item_id);
```

#### 3.3 åº“å­˜ç®¡ç†é›†æˆ
```sql
-- åº“å­˜å‡ºå…¥åº“è®°å½•å¢åŠ ç”Ÿäº§å•å…³è”
ALTER TABLE `erp_stock_in`
ADD COLUMN `production_order_id` bigint COMMENT 'å…³è”çš„ç”Ÿäº§å•ID',
ADD COLUMN `production_order_item_id` bigint COMMENT 'å…³è”çš„ç”Ÿäº§å•æ˜ç»†ID',
ADD INDEX idx_stock_in_production ON erp_stock_in(production_order_id);

ALTER TABLE `erp_stock_out`
ADD COLUMN `production_order_id` bigint COMMENT 'å…³è”çš„ç”Ÿäº§å•ID',
ADD COLUMN `production_order_item_id` bigint COMMENT 'å…³è”çš„ç”Ÿäº§å•æ˜ç»†ID',
ADD INDEX idx_stock_out_production ON erp_stock_out(production_order_id);
```

#### 3.4 è´¢åŠ¡ç®¡ç†é›†æˆ
```sql
-- æ”¶æ¬¾å•å¢åŠ ç”Ÿäº§å•å…³è”
ALTER TABLE `erp_finance_receipt`
ADD COLUMN `production_order_id` bigint COMMENT 'å…³è”çš„ç”Ÿäº§å•ID',
ADD INDEX idx_finance_receipt_production ON erp_finance_receipt(production_order_id);
```

### 4. ä¸šåŠ¡é€»è¾‘é£é™©ç‚¹

#### 4.1 å¹¶å‘æ“ä½œé£é™©
**é£é™©åœºæ™¯ï¼š**
```java
// å¤šç”¨æˆ·åŒæ—¶å˜æ›´ç”Ÿäº§å•çŠ¶æ€
// åœºæ™¯1ï¼šç”¨æˆ·Aå°†çŠ¶æ€ä»"å¾…æ’äº§"æ”¹ä¸º"é…ä»¶é‡‡è´­ä¸­"
// åœºæ™¯2ï¼šç”¨æˆ·BåŒæ—¶å°†çŠ¶æ€ä»"å¾…æ’äº§"æ”¹ä¸º"å·²å–æ¶ˆ"
// å¯èƒ½å¯¼è‡´çŠ¶æ€ä¸ä¸€è‡´
```

**è§£å†³æ–¹æ¡ˆï¼š**
```java
// ä½¿ç”¨ä¹è§‚é”
@Version
private Integer version;

// çŠ¶æ€å˜æ›´æ—¶æ£€æŸ¥ç‰ˆæœ¬å·
public void changeStatus(Long id, Integer newStatus, Integer expectedVersion) {
    ErpProductionOrderDO order = productionOrderMapper.selectById(id);
    if (!Objects.equals(order.getVersion(), expectedVersion)) {
        throw new BusinessException("ç”Ÿäº§å•å·²è¢«å…¶ä»–ç”¨æˆ·ä¿®æ”¹ï¼Œè¯·åˆ·æ–°åé‡è¯•");
    }
    // çŠ¶æ€å˜æ›´é€»è¾‘
}
```

#### 4.2 åº“å­˜æ£€æŸ¥é£é™©
**é£é™©åœºæ™¯ï¼š**
```java
// æ£€æŸ¥åº“å­˜æ—¶åº“å­˜å……è¶³ï¼Œä½†å®é™…æ‰£å‡æ—¶åº“å­˜ä¸è¶³
// å¯èƒ½å¯¼è‡´è¶…å–é—®é¢˜
```

**è§£å†³æ–¹æ¡ˆï¼š**
```java
// ä½¿ç”¨æ•°æ®åº“é”
@Transactional(rollbackFor = Exception.class)
public boolean checkAndReserveInventory(Long productionOrderId) {
    // 1. æŸ¥è¯¢å¹¶é”å®šéœ€è¦çš„åº“å­˜
    List<ErpStockDO> stocks = stockMapper.selectForUpdate(productionOrderId);

    // 2. æ£€æŸ¥åº“å­˜æ˜¯å¦å……è¶³
    for (ErpStockDO stock : stocks) {
        if (stock.getCount().compareTo(stock.getRequiredCount()) < 0) {
            return false;
        }
    }

    // 3. é¢„æ‰£åº“å­˜
    stockMapper.reserveStock(productionOrderId);
    return true;
}
```

### 5. æ€§èƒ½ä¼˜åŒ–é£é™©

#### 5.1 å¤§æ•°æ®é‡æŸ¥è¯¢é£é™©
**é£é™©åœºæ™¯ï¼š**
- ç”Ÿäº§å•æ˜ç»†æ•°æ®é‡å¤§æ—¶ï¼ŒæŸ¥è¯¢æ€§èƒ½ä¸‹é™
- å¤šè¡¨JOINæŸ¥è¯¢æ—¶å“åº”æ—¶é—´è¿‡é•¿

**è§£å†³æ–¹æ¡ˆï¼š**
```java
// åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–
@Select("SELECT * FROM erp_production_order WHERE tenant_id = #{tenantId} " +
        "AND (#{no} IS NULL OR no LIKE CONCAT('%', #{no}, '%')) " +
        "AND (#{status} IS NULL OR status = #{status}) " +
        "ORDER BY create_time DESC LIMIT #{offset}, #{limit}")
PageResult<ErpProductionOrderDO> selectPage(@Param("tenantId") Long tenantId,
                                          @Param("no") String no,
                                          @Param("status") Integer status,
                                          @Param("offset") Integer offset,
                                          @Param("limit") Integer limit);

// ä½¿ç”¨ç¼“å­˜
@Cacheable(value = "production-order", key = "#id")
ErpProductionOrderRespVO getProductionOrder(Long id);
```

#### 5.2 ç»Ÿè®¡æŸ¥è¯¢é£é™©
**é£é™©åœºæ™¯ï¼š**
- ç”Ÿäº§ç»Ÿè®¡æŸ¥è¯¢æ¶‰åŠå¤§é‡è®¡ç®—ï¼Œå½±å“ç³»ç»Ÿæ€§èƒ½

**è§£å†³æ–¹æ¡ˆï¼š**
```java
// å¼‚æ­¥ç»Ÿè®¡
@Async
public CompletableFuture<ProductionStatisticsVO> calculateStatistics(Long tenantId) {
    // åå°è®¡ç®—ç»Ÿè®¡æ•°æ®
}

// é¢„è®¡ç®—+ç¼“å­˜
@Scheduled(cron = "0 0 1 * * ?") // æ¯å¤©å‡Œæ™¨1ç‚¹æ‰§è¡Œ
public void preCalculateStatistics() {
    // é¢„è®¡ç®—ç»Ÿè®¡æ•°æ®å¹¶å­˜å…¥ç¼“å­˜
}
```

### 6. æ•°æ®ä¸€è‡´æ€§é£é™©

#### 6.1 åˆ†å¸ƒå¼äº‹åŠ¡é£é™©
**é£é™©åœºæ™¯ï¼š**
- ç”Ÿäº§å•çŠ¶æ€å˜æ›´ä¸åº“å­˜æ‰£å‡ä¸åœ¨åŒä¸€äº‹åŠ¡ä¸­
- å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´

**è§£å†³æ–¹æ¡ˆï¼š**
```java
// ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆSeataï¼‰
@GlobalTransactional(rollbackFor = Exception.class)
public void changeProductionOrderStatus(Long productionOrderId, Integer newStatus) {
    // 1. æ›´æ–°ç”Ÿäº§å•çŠ¶æ€
    productionOrderService.updateStatus(productionOrderId, newStatus);

    // 2. æ‰£å‡/å¢åŠ åº“å­˜
    if (newStatus == ErpProductionOrderStatus.IN_PRODUCTION) {
        stockService.consumeMaterial(productionOrderId);
    }
}
```

#### 6.2 ä¸»ä»æ•°æ®åŒæ­¥é£é™©
**é£é™©åœºæ™¯ï¼š**
- ä¸»ä»æ•°æ®åº“åŒæ­¥å»¶è¿Ÿå¯¼è‡´è¯»å–åˆ°è¿‡æœŸæ•°æ®

**è§£å†³æ–¹æ¡ˆï¼š**
```java
// è¯»æ“ä½œä½¿ç”¨ä¸»åº“
@MasterSlave(mode = DataSourceType.master)
public ErpProductionOrderDO selectForUpdate(Long id);

// å¼ºåˆ¶ä»ä¸»åº“è¯»å–æœ€æ–°æ•°æ®
@ReadReplica(forced = true)
public List<ErpProductionOrderDO> selectLatestData(Long tenantId);
```

### 7. å®‰å…¨é£é™©

#### 7.1 æƒé™æ§åˆ¶é£é™©
**é£é™©åœºæ™¯ï¼š**
- ç”¨æˆ·å¯èƒ½è®¿é—®å…¶ä»–ç§Ÿæˆ·çš„ç”Ÿäº§å•æ•°æ®
- ç”¨æˆ·å¯èƒ½æ“ä½œä¸å±äºè‡ªå·±çš„ç”Ÿäº§å•

**è§£å†³æ–¹æ¡ˆï¼š**
```java
// åœ¨Serviceå±‚å¢åŠ ç§Ÿæˆ·æ£€æŸ¥
@PreAuthorize("@ss.hasPermission('erp:production-order:query')")
public ErpProductionOrderRespVO getProductionOrder(Long id) {
    // 1. æ£€æŸ¥ç§Ÿæˆ·æƒé™
    ErpProductionOrderDO order = productionOrderMapper.selectById(id);
    if (!Objects.equals(order.getTenantId(), TenantContextHolder.getTenantId())) {
        throw new SecurityException("æ— æƒè®¿é—®è¯¥ç”Ÿäº§å•");
    }

    // 2. æ£€æŸ¥ç”¨æˆ·æƒé™
    if (!canUserAccessProductionOrder(getCurrentUserId(), id)) {
        throw new SecurityException("æ— æƒè®¿é—®è¯¥ç”Ÿäº§å•");
    }

    return BeanUtils.toBean(order, ErpProductionOrderRespVO.class);
}
```

#### 7.2 æ•°æ®æ³„éœ²é£é™©
**é£é™©åœºæ™¯ï¼š**
- ç”Ÿäº§å•åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼ˆå®¢æˆ·ä¿¡æ¯ã€æˆæœ¬æ•°æ®ï¼‰
- æ—¥å¿—è®°å½•å¯èƒ½æ³„éœ²æ•æ„Ÿæ•°æ®

**è§£å†³æ–¹æ¡ˆï¼š**
```java
// æ•æ„Ÿæ•°æ®è„±æ•
@Data
public class ErpProductionOrderRespVO {
    private Long id;
    private String no;
    private Integer status;
    // å®¢æˆ·ä¿¡æ¯è„±æ•
    @Sensitive(sensitiveType = "customer")
    private String customerName;
    // æˆæœ¬æ•°æ®æƒé™æ§åˆ¶
    @RequiresPermission("erp:production-order:cost")
    private BigDecimal totalCost;
}

// æ—¥å¿—è„±æ•
@JsonIgnore
private BigDecimal actualCost;
```

### 8. è¿ç»´é£é™©

#### 8.1 æ•°æ®è¿ç§»é£é™©
**é£é™©åœºæ™¯ï¼š**
- ç”Ÿäº§æ•°æ®è¿ç§»è¿‡ç¨‹ä¸­å¯èƒ½ä¸¢å¤±æˆ–æŸå
- åœæœºæ—¶é—´è¿‡é•¿å½±å“ä¸šåŠ¡

**è§£å†³æ–¹æ¡ˆï¼š**
```sql
-- æ•°æ®è¿ç§»è„šæœ¬
-- 1. åˆ›å»ºå¤‡ä»½è¡¨
CREATE TABLE erp_production_order_backup AS SELECT * FROM erp_production_order WHERE 1=0;

-- 2. åˆ†æ‰¹è¿ç§»æ•°æ®
INSERT INTO erp_production_order_backup
SELECT * FROM erp_production_order WHERE create_time < '2025-12-01' LIMIT 1000;

-- 3. æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥
SELECT COUNT(*) FROM erp_production_order WHERE id NOT IN (SELECT id FROM erp_production_order_backup);
```

#### 8.2 ç³»ç»Ÿç›‘æ§é£é™©
**é£é™©åœºæ™¯ï¼š**
- ç”Ÿäº§å•ç³»ç»Ÿå¼‚å¸¸æ—¶æ— æ³•åŠæ—¶å‘ç°
- æ€§èƒ½é—®é¢˜å½±å“ç”¨æˆ·ä½“éªŒ

**è§£å†³æ–¹æ¡ˆï¼š**
```java
// å…³é”®æŒ‡æ ‡ç›‘æ§
@Component
public class ProductionOrderMetrics {
    private final MeterRegistry meterRegistry;

    public void recordStatusChange(Long orderId, Integer fromStatus, Integer toStatus) {
        // è®°å½•çŠ¶æ€å˜æ›´æŒ‡æ ‡
        Counter.builder("production.order.status.change")
               .tag("from_status", String.valueOf(fromStatus))
               .tag("to_status", String.valueOf(toStatus))
               .register(meterRegistry)
               .increment();
    }
}

// å¼‚å¸¸å‘Šè­¦
@EventListener
public void handleProductionOrderException(ProductionOrderExceptionEvent event) {
    // å‘é€å‘Šè­¦é€šçŸ¥
    alertService.sendAlert("ç”Ÿäº§å•å¼‚å¸¸", event.getException().getMessage());
}
```

### 9. æµ‹è¯•é£é™©

#### 9.1 æµ‹è¯•æ•°æ®æ±¡æŸ“é£é™©
**é£é™©åœºæ™¯ï¼š**
- æµ‹è¯•æ•°æ®ä¸ç”Ÿäº§æ•°æ®æ··åˆ
- æµ‹è¯•ç¯å¢ƒé…ç½®å½±å“ç”Ÿäº§ç¯å¢ƒ

**è§£å†³æ–¹æ¡ˆï¼š**
```yaml
# æµ‹è¯•ç¯å¢ƒé…ç½®
spring:
  datasource:
    url: jdbc:mysql://test-db:3306/erp_test
    username: test_user
    password: test_password
  jpa:
    hibernate:
      ddl-auto: create-drop
```

```java
// æµ‹è¯•æ•°æ®éš”ç¦»
@Test
@Transactional
@Rollback
public void testCreateProductionOrder() {
    // ä½¿ç”¨äº‹åŠ¡å›æ»šç¡®ä¿æµ‹è¯•æ•°æ®ä¸æ±¡æŸ“æ•°æ®åº“
    ErpProductionOrderSaveReqVO createReq = createTestProductionOrder();
    ErpProductionOrderRespVO result = productionOrderService.createProductionOrder(createReq);

    assertThat(result).isNotNull();
    assertThat(result.getStatus()).isEqualTo(ErpProductionOrderStatus.RECEIVED.getStatus());
}
```

### 10. å¼€å‘è§„èŒƒé£é™©

#### 10.1 ä»£ç è´¨é‡é£é™©
**é£é™©åœºæ™¯ï¼š**
- ä»£ç è§„èŒƒä¸ç»Ÿä¸€å¯¼è‡´ç»´æŠ¤å›°éš¾
- ç¼ºå°‘å¿…è¦çš„å¼‚å¸¸å¤„ç†

**è§£å†³æ–¹æ¡ˆï¼š**
```java
// ç»Ÿä¸€å¼‚å¸¸å¤„ç†
@RestControllerAdvice
public class ProductionOrderExceptionHandler {

    @ExceptionHandler(ProductionOrderException.class)
    public CommonResult<Void> handleProductionOrderException(ProductionOrderException e) {
        log.error("ç”Ÿäº§å•æ“ä½œå¼‚å¸¸", e);
        return CommonResult.error(e.getCode(), e.getMessage());
    }
}

// å‚æ•°éªŒè¯
@Data
public class ErpProductionOrderSaveReqVO {
    @NotBlank(message = "ç”Ÿäº§å•å·ä¸èƒ½ä¸ºç©º")
    @Length(max = 50, message = "ç”Ÿäº§å•å·é•¿åº¦ä¸èƒ½è¶…è¿‡50ä¸ªå­—ç¬¦")
    private String no;

    @NotNull(message = "å®¢æˆ·IDä¸èƒ½ä¸ºç©º")
    private Long customerId;

    @NotNull(message = "ä¸‹å•æ—¥æœŸä¸èƒ½ä¸ºç©º")
    @DateTimeFormat(pattern = "yyyy-MM-dd HH:mm:ss")
    private LocalDateTime orderDate;
}
```

## ğŸ“‹ é£é™©åº”å¯¹è®¡åˆ’

### é«˜ä¼˜å…ˆçº§é£é™©ï¼ˆç«‹å³å¤„ç†ï¼‰
1. **ç§Ÿæˆ·æ•°æ®éš”ç¦»**ï¼šå¿…é¡»åœ¨æ‰€æœ‰SQLæŸ¥è¯¢ä¸­åŒ…å«ç§Ÿæˆ·IDæ£€æŸ¥
2. **å¹¶å‘æ§åˆ¶**ï¼šå®æ–½ä¹è§‚é”æœºåˆ¶é˜²æ­¢å¹¶å‘ä¿®æ”¹å†²çª
3. **æƒé™éªŒè¯**ï¼šåœ¨æ‰€æœ‰æ“ä½œä¸­å¢åŠ ç§Ÿæˆ·å’Œç”¨æˆ·æƒé™æ£€æŸ¥

### ä¸­ä¼˜å…ˆçº§é£é™©ï¼ˆå¼€å‘è¿‡ç¨‹ä¸­å¤„ç†ï¼‰
1. **æ€§èƒ½ä¼˜åŒ–**ï¼šåˆ†é¡µæŸ¥è¯¢ã€ç´¢å¼•ä¼˜åŒ–ã€ç¼“å­˜ç­–ç•¥
2. **æ•°æ®ä¸€è‡´æ€§**ï¼šåˆ†å¸ƒå¼äº‹åŠ¡ã€ä¸»ä»åŒæ­¥ç­–ç•¥
3. **å¼‚å¸¸å¤„ç†**ï¼šå®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œé”™è¯¯æ¢å¤æœºåˆ¶

### ä½ä¼˜å…ˆçº§é£é™©ï¼ˆåæœŸä¼˜åŒ–ï¼‰
1. **ç›‘æ§å‘Šè­¦**ï¼šç³»ç»ŸæŒ‡æ ‡ç›‘æ§å’Œå¼‚å¸¸å‘Šè­¦
2. **æµ‹è¯•è¦†ç›–**ï¼šå®Œå–„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
3. **æ–‡æ¡£å®Œå–„**ï¼šAPIæ–‡æ¡£ã€æ“ä½œæ‰‹å†Œã€æ•…éšœå¤„ç†æŒ‡å—

## ğŸ¯ å»ºè®®çš„å¼€å‘æµç¨‹è°ƒæ•´

1. **æ¯ä¸ªå¼€å‘é˜¶æ®µå®Œæˆåè¿›è¡Œé£é™©æ£€æŸ¥**
2. **å…³é”®åŠŸèƒ½ç‚¹è¿›è¡Œä»£ç å®¡æŸ¥**
3. **é›†æˆæµ‹è¯•é‡ç‚¹å…³æ³¨ç§Ÿæˆ·éš”ç¦»å’Œæ•°æ®å®‰å…¨**
4. **ä¸Šçº¿å‰è¿›è¡Œå®Œæ•´çš„å®‰å…¨æµ‹è¯•**

è¿™äº›é£é™©ç‚¹çš„è¯†åˆ«å’Œè§£å†³æ–¹æ¡ˆå°†å¤§å¤§æé«˜ç”Ÿäº§å•ç®¡ç†æ¨¡å—çš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚