# ERP系统启动说明

## 当前状态

✅ **数据库服务**：MySQL和Redis已通过Docker启动
- MySQL: 运行在 3306 端口
- Redis: 运行在 6379 端口

✅ **前端服务**：已启动
- 前端开发服务器正在运行
- 请检查终端输出确认实际端口（通常在5173或3000）

❌ **后端服务**：需要配置Java环境

## 启动步骤

### 1. 数据库服务（已完成）
```bash
cd script/docker
docker-compose up -d mysql redis
```

### 2. 前端服务（已启动）
```bash
cd original-yudao-ui
pnpm dev
```
前端服务应该在 `http://localhost:5173` 或类似端口运行。

### 3. 后端服务

**重要提示**：如果每次运行 `java` 命令时都弹出"安装Java"的提示，这是因为macOS的Java包装器找不到已安装的Java。解决方案如下：

**方法1：永久配置JAVA_HOME（推荐）**

由于你的Java 8是通过Homebrew安装在 `/usr/local/opt/openjdk@8`，请在 `~/.zshrc` 或 `~/.bash_profile` 中添加：

```bash
# Java 8 配置
export JAVA_HOME=/usr/local/opt/openjdk@8
export PATH="$JAVA_HOME/bin:$PATH"
```

然后重新加载配置：
```bash
source ~/.zshrc  # 或 source ~/.bash_profile
```

**方法2：使用启动脚本（已自动查找Java）**

`start-backend.sh` 脚本已经更新，会自动查找Java安装位置，包括：
- Homebrew安装的Java (`/usr/local/opt/openjdk@8`, `/opt/homebrew/opt/openjdk@8`)
- 标准安装位置 (`/Library/Java/JavaVirtualMachines/`)
- JAVA_HOME环境变量

直接运行即可：
```bash
./start-backend.sh
```

**方法3：临时设置（仅当前终端会话）**
```bash
export JAVA_HOME=/usr/local/opt/openjdk@8
./start-backend.sh
```

## 访问地址

- 前端管理界面：http://localhost:5173（或终端显示的端口）
- 后端API：http://localhost:48080
- Swagger文档：http://localhost:48080/swagger-ui
- MySQL：localhost:3306（用户名：root，密码：123456，数据库：ruoyi-vue-pro）
- Redis：localhost:6379

## 常见问题

1. **Java找不到**
   - 请确保Java 8已正确安装
   - 设置JAVA_HOME环境变量指向Java安装目录
   - 或在启动脚本中直接指定Java路径

2. **数据库连接失败**
   - 确保Docker服务正在运行
   - 检查MySQL和Redis容器状态：`docker ps`

3. **前端端口被占用**
   - 修改 `.env.local` 中的端口配置
   - 或使用 `pnpm dev --port 3001` 指定其他端口

