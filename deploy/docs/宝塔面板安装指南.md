# 宝塔面板安装和Docker管理指南

## 📋 概述

宝塔面板是一个强大的Linux服务器管理面板，提供图形化界面管理服务器。可以通过宝塔面板方便地安装和管理Docker。

## ✅ 优势

1. **图形化管理**: 无需记忆命令，可视化操作
2. **一键安装**: 软件一键安装，包括Docker
3. **文件管理**: 可视化文件管理
4. **监控面板**: 实时查看服务器资源使用情况
5. **日志查看**: 方便查看各种服务日志

## 🚀 安装宝塔面板

### 步骤1: 下载安装脚本

```bash
# CentOS安装命令
yum install -y wget && wget -O install.sh https://download.bt.cn/install/install_6.0.sh && sh install.sh ed8484bec

# 或者使用官方一键安装脚本
curl -sSO https://download.bt.cn/install/install_panel.sh && bash install_panel.sh
```

### 步骤2: 等待安装完成

安装过程可能需要5-10分钟，安装完成后会显示：
- 面板地址
- 用户名
- 密码

**重要**: 请妥善保存这些信息！

### 步骤3: 开放宝塔面板端口

宝塔面板默认使用8888端口，需要在安全组中开放：

**安全组规则：**
```
协议类型: TCP
端口范围: 8888
源地址: 0.0.0.0/0  (或限制为你的IP，更安全)
动作: 允许
```

### 步骤4: 访问宝塔面板

在浏览器中访问：
```
http://你的服务器IP:8888
```

使用安装时显示的用户名和密码登录。

## 🐳 在宝塔中安装Docker

### 方法1: 通过软件商店安装（推荐）

1. 登录宝塔面板
2. 点击左侧 **"软件商店"**
3. 搜索 **"Docker管理器"** 或 **"Docker"**
4. 点击 **"安装"**
5. 等待安装完成

### 方法2: 通过命令行安装（如果已安装Docker）

如果服务器已经安装了Docker（如我们的情况），可以：

1. 在宝塔面板中安装 **"Docker管理器"** 插件
2. 插件会自动检测已安装的Docker
3. 可以直接使用Docker管理器进行管理

## 📦 使用宝塔管理Docker

### 1. Docker容器管理

- 查看运行中的容器
- 启动/停止/重启容器
- 查看容器日志
- 进入容器终端

### 2. Docker镜像管理

- 查看本地镜像
- 拉取镜像（可以通过界面操作）
- 删除镜像
- 构建镜像

### 3. Docker Compose管理

- 创建和管理docker-compose.yml文件
- 一键启动/停止服务栈
- 查看服务状态

## 🔧 配置Docker Compose项目

### 在宝塔中部署ERP系统

1. **创建项目目录**
   - 在宝塔文件管理中，进入 `/opt/erp-system/script/docker`

2. **编辑docker-compose.prod.yml**
   - 使用宝塔的文件编辑器编辑配置文件
   - 检查配置是否正确

3. **编辑.env文件**
   - 使用宝塔编辑器修改环境变量
   - 确保密码等配置正确

4. **使用终端执行命令**
   - 在宝塔面板中打开终端
   - 执行部署命令：
   ```bash
   cd /opt/erp-system/script/docker
   docker compose -f docker-compose.prod.yml --env-file .env up -d
   ```

## 🛠️ 宝塔面板常用功能

### 1. 文件管理
- 可视化文件浏览器
- 在线编辑文件
- 上传/下载文件
- 文件权限管理

### 2. 计划任务
- 定时执行脚本
- 定时备份
- 定时清理日志

### 3. 监控面板
- CPU使用率
- 内存使用率
- 磁盘使用率
- 网络流量

### 4. 日志查看
- 系统日志
- 服务日志
- 错误日志

## ⚠️ 注意事项

### 1. 安全设置

**修改默认端口：**
- 登录宝塔面板后，立即修改默认端口（8888）
- 在 **"面板设置"** → **"面板端口"** 中修改

**修改用户名和密码：**
- 在 **"面板设置"** 中修改登录信息
- 使用强密码

**绑定IP：**
- 可以限制只有特定IP可以访问面板
- 在 **"面板设置"** → **"安全设置"** 中配置

### 2. 防火墙配置

宝塔面板会自动配置防火墙规则，但需要确保：
- 安全组中开放了8888端口（或你修改后的端口）
- 如果使用其他端口，也需要在安全组中开放

### 3. Docker已安装的情况

如果服务器已经安装了Docker（如我们的情况）：
- 宝塔的Docker管理器会自动检测
- 可以直接使用，无需重新安装
- 但可能需要重启Docker服务以让宝塔识别

## 🔍 验证安装

### 检查宝塔面板

```bash
# 检查宝塔服务状态
systemctl status bt

# 检查端口是否监听
netstat -tlnp | grep 8888
```

### 检查Docker管理器

1. 登录宝塔面板
2. 进入 **"软件商店"** → **"已安装"**
3. 查看 **"Docker管理器"** 是否已安装
4. 点击进入，查看Docker状态

## 📝 完整安装步骤（针对当前服务器）

```bash
# 1. 安装宝塔面板
yum install -y wget && wget -O install.sh https://download.bt.cn/install/install_6.0.sh && sh install.sh ed8484bec

# 2. 等待安装完成，记录登录信息

# 3. 开放安全组端口8888（在火山引擎控制台操作）

# 4. 访问 http://115.190.240.137:8888

# 5. 登录后，在软件商店安装Docker管理器

# 6. 使用Docker管理器管理Docker服务
```

## 🆘 常见问题

### Q1: 安装后无法访问面板

**解决方法：**
1. 检查安全组是否开放了8888端口
2. 检查防火墙是否阻止
3. 检查宝塔服务是否运行：`systemctl status bt`

### Q2: Docker管理器无法识别已安装的Docker

**解决方法：**
```bash
# 重启Docker服务
systemctl restart docker

# 检查Docker状态
docker info
```

### Q3: 忘记宝塔面板密码

**解决方法：**
```bash
# 在服务器上执行
bt default
# 会显示默认的用户名和密码
```

## 🔗 相关资源

- 宝塔官网: https://www.bt.cn/
- 宝塔文档: https://www.bt.cn/bbs/
- Docker管理器插件文档: 在宝塔面板中查看

---

**提示**: 安装宝塔面板后，可以更方便地管理服务器和Docker，但需要注意安全设置，避免面板被恶意访问。

