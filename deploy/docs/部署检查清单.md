# ERP系统部署检查清单

## 📋 部署前检查

### 服务器准备
- [ ] 服务器已购买并配置完成（详细步骤见：[火山引擎服务器配置指南](./火山引擎服务器配置指南.md)）
- [ ] 服务器IP地址已记录
- [ ] SSH密钥或密码已准备好
- [ ] 服务器防火墙规则已配置（开放80、48080端口）
- [ ] 安全组规则已配置（22、80、48080端口）

### 环境要求
- [ ] 服务器操作系统为 CentOS 7+ / Ubuntu 18.04+ / Debian 10+
- [ ] 服务器配置满足最低要求（2核4G）
- [ ] 服务器有足够的磁盘空间（至少40GB）

### 软件安装
- [ ] Docker 已安装（版本 20.10+）
- [ ] Docker Compose 已安装（版本 2.0+）
- [ ] Maven 已安装（用于构建后端，版本 3.6+）
- [ ] Node.js 和 pnpm 已安装（用于构建前端，可选，如果使用Docker构建）

---

## 📦 项目准备

### 代码准备
- [ ] 项目代码已上传到服务器
- [ ] 项目目录结构完整
- [ ] 所有依赖文件都在

### 配置文件
- [ ] 已创建 `.env` 文件（从 `env.prod.example` 复制）
- [ ] 已修改数据库密码（不是默认密码）
- [ ] 已修改Redis密码（如果使用）
- [ ] 已检查所有配置项

### 数据库
- [ ] 数据库初始化SQL文件存在
- [ ] 数据库配置信息正确

---

## 🚀 部署步骤

### 步骤1: 环境准备
- [ ] 服务器已配置完成（参考：[火山引擎服务器配置指南](./火山引擎服务器配置指南.md)）
- [ ] 运行快速部署脚本：`./deploy/scripts/quick-deploy.sh`
- [ ] 确认Docker和Docker Compose安装成功
- [ ] 确认防火墙规则已配置

### 步骤2: 配置环境变量
- [ ] 进入项目根目录
- [ ] 复制 `deploy/config/env.prod.example` 为 `script/docker/.env`
- [ ] 编辑 `.env` 文件，修改所有密码
- [ ] 确认配置项正确

### 步骤3: 构建后端（如需要）
- [ ] 如果使用Maven构建，运行 `mvn clean package -DskipTests`
- [ ] 确认 `yudao-server/target/yudao-server.jar` 文件存在

### 步骤4: 部署服务
- [ ] 运行部署脚本：`./deploy/scripts/deploy-volcano.sh`
- [ ] 或手动运行：`cd script/docker && docker-compose -f ../../deploy/config/docker-compose.prod.yml up -d --build`
- [ ] 等待所有服务启动完成

### 步骤5: 验证部署
- [ ] 检查服务状态：`cd script/docker && docker-compose -f ../../deploy/config/docker-compose.prod.yml ps`
- [ ] 查看服务日志：`cd script/docker && docker-compose -f ../../deploy/config/docker-compose.prod.yml logs -f`
- [ ] 访问前端：`http://服务器IP`
- [ ] 访问后端API：`http://服务器IP:48080`
- [ ] 访问Swagger文档：`http://服务器IP:48080/swagger-ui/index.html`

---

## ✅ 部署后检查

### 服务状态
- [ ] MySQL容器运行正常
- [ ] Redis容器运行正常
- [ ] 后端服务容器运行正常
- [ ] 前端服务容器运行正常

### 功能测试
- [ ] 前端页面可以正常访问
- [ ] 可以正常登录（默认账号：admin/admin123）
- [ ] 后端API可以正常访问
- [ ] 数据库连接正常
- [ ] Redis连接正常

### 安全检查
- [ ] 已修改默认管理员密码
- [ ] 已修改数据库root密码
- [ ] 已配置Redis密码（如果使用）
- [ ] 防火墙规则已正确配置
- [ ] 敏感信息不在日志中暴露

---

## 🔧 常见问题排查

### 服务无法启动
- [ ] 检查Docker服务是否运行：`systemctl status docker`
- [ ] 检查端口是否被占用：`netstat -tlnp | grep 端口号`
- [ ] 查看容器日志：`docker-compose logs 服务名`

### 数据库连接失败
- [ ] 检查MySQL容器是否运行：`docker ps | grep mysql`
- [ ] 检查数据库密码是否正确
- [ ] 检查数据库是否已初始化

### 前端无法访问后端
- [ ] 检查Nginx配置是否正确
- [ ] 检查后端服务是否正常运行
- [ ] 检查网络连接

### 内存不足
- [ ] 检查服务器内存使用：`free -h`
- [ ] 调整JVM参数减少内存占用
- [ ] 考虑升级服务器配置

---

## 📝 部署后操作

### 必须操作
- [ ] 修改默认管理员密码
- [ ] 配置HTTPS（使用SSL证书）
- [ ] 设置定期备份任务
- [ ] 配置监控告警

### 建议操作
- [ ] 配置日志轮转
- [ ] 设置系统监控
- [ ] 配置CDN加速
- [ ] 优化数据库性能

---

## 📞 获取帮助

如果遇到问题：
1. 查看部署指南文档
2. 检查服务日志
3. 查看常见问题部分
4. 提交Issue获取帮助

---

**部署完成后，请妥善保管以下信息：**
- 服务器IP地址和SSH访问信息
- 数据库密码
- Redis密码（如果使用）
- 管理员账号和密码
- 备份文件位置

祝部署顺利！🎉

