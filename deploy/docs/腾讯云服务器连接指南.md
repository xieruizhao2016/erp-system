# è…¾è®¯äº‘æœåŠ¡å™¨è¿æ¥æŒ‡å—

## ğŸ” æœåŠ¡å™¨ä¿¡æ¯

**å…¬ç½‘IPï¼š** `101.33.244.240`  
**å†…ç½‘IPï¼š** `172.16.0.17`  
**ä¸»æœºåï¼š** `VM-0-17-ubuntu`  
**æ“ä½œç³»ç»Ÿï¼š** Ubuntu  
**SSHç”¨æˆ·åï¼š** `ubuntu`ï¼ˆä¸æ˜¯rootï¼‰

## ğŸ“ SSHè¿æ¥æ–¹å¼

### æ–¹å¼1: ä½¿ç”¨ç§é’¥è¿æ¥ï¼ˆæ¨èï¼‰

```bash
ssh -i /Users/xierui/Documents/Project/Other/erp-system/tengxunyun.pem ubuntu@101.33.244.240
```

### æ–¹å¼2: é…ç½®SSHåˆ«åï¼ˆæ›´æ–¹ä¾¿ï¼‰

åœ¨ `~/.ssh/config` æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```
Host tengxunyun
    HostName 101.33.244.240
    User ubuntu
    IdentityFile /Users/xierui/Documents/Project/Other/erp-system/tengxunyun.pem
    StrictHostKeyChecking no
```

ç„¶åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š
```bash
ssh tengxunyun
```

### æ–¹å¼3: ä½¿ç”¨å¯†ç ç™»å½•ï¼ˆå¦‚æœå·²è®¾ç½®å¯†ç ï¼‰

```bash
ssh ubuntu@101.33.244.240
# è¾“å…¥å¯†ç 
```

## âš ï¸ é‡è¦æç¤º

### 1. ç§é’¥æ–‡ä»¶æƒé™

ç§é’¥æ–‡ä»¶å¿…é¡»è®¾ç½®ä¸ºæ­£ç¡®çš„æƒé™ï¼ˆ600ï¼‰ï¼š

```bash
chmod 600 /Users/xierui/Documents/Project/Other/erp-system/tengxunyun.pem
```

### 2. ç”¨æˆ·åè¯´æ˜

- âœ… **æ­£ç¡®ç”¨æˆ·åï¼š** `ubuntu`
- âŒ **é”™è¯¯ç”¨æˆ·åï¼š** `root`ï¼ˆæ­¤æœåŠ¡å™¨ä¸å…è®¸rootç›´æ¥ç™»å½•ï¼‰

å¦‚æœéœ€è¦rootæƒé™ï¼Œç™»å½•åä½¿ç”¨ï¼š
```bash
sudo su -
```

### 3. å®‰å…¨ç»„é…ç½®

ç¡®ä¿è…¾è®¯äº‘æ§åˆ¶å°çš„å®‰å…¨ç»„å·²å¼€æ”¾ä»¥ä¸‹ç«¯å£ï¼š

| ç«¯å£ | åè®® | è¯´æ˜ |
|------|------|------|
| 22 | TCP | SSHè¿æ¥ |
| 13794 | TCP | å®å¡”é¢æ¿ |
| 80 | TCP | HTTPï¼ˆå‰ç«¯ï¼‰ |
| 48080 | TCP | åç«¯API |

## ğŸ”§ å¸¸ç”¨æ“ä½œ

### æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€

```bash
# è¿æ¥æœåŠ¡å™¨
ssh -i /Users/xierui/Documents/Project/Other/erp-system/tengxunyun.pem ubuntu@101.33.244.240

# æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯
hostname
uname -a
df -h
free -h

# æŸ¥çœ‹DockeræœåŠ¡çŠ¶æ€
docker ps
docker-compose ps

# æŸ¥çœ‹å®å¡”é¢æ¿çŠ¶æ€
sudo /etc/init.d/bt status
```

### æŸ¥çœ‹æœåŠ¡æ—¥å¿—

```bash
# æŸ¥çœ‹Dockerå®¹å™¨æ—¥å¿—
cd /opt/erp-system/script/docker
docker-compose -f docker-compose.prod.yml logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs -f server
docker-compose -f docker-compose.prod.yml logs -f admin
```

## ğŸŒ å®å¡”é¢æ¿è®¿é—®

**å¤–ç½‘é¢æ¿åœ°å€ï¼š**
```
https://101.33.244.240:13794/5343ca33
```

**å†…ç½‘é¢æ¿åœ°å€ï¼š**
```
https://172.16.0.17:13794/5343ca33
```

**ç”¨æˆ·åï¼š** `skmlvi0t`  
**å¯†ç ï¼š** `98c765f9`

âš ï¸ **é‡è¦ï¼š** é¦–æ¬¡è®¿é—®æ—¶ï¼Œæµè§ˆå™¨ä¼šæç¤º"ä¸å®‰å…¨"ï¼Œç‚¹å‡»"é«˜çº§" â†’ "ç»§ç»­è®¿é—®"å³å¯ã€‚

## ğŸ“‹ å¿«é€Ÿè¿æ¥è„šæœ¬

å¯ä»¥åˆ›å»ºä¸€ä¸ªä¾¿æ·çš„è¿æ¥è„šæœ¬ï¼š

```bash
#!/bin/bash
# æ–‡ä»¶ï¼šconnect-tengxunyun.sh

ssh -i /Users/xierui/Documents/Project/Other/erp-system/tengxunyun.pem ubuntu@101.33.244.240
```

ä½¿ç”¨ï¼š
```bash
chmod +x connect-tengxunyun.sh
./connect-tengxunyun.sh
```

## ğŸ†˜ è¿æ¥é—®é¢˜æ’æŸ¥

### é—®é¢˜1: Permission denied

**åŸå› ï¼š** ç§é’¥æ–‡ä»¶æƒé™ä¸æ­£ç¡®æˆ–ç”¨æˆ·åé”™è¯¯

**è§£å†³ï¼š**
```bash
# æ£€æŸ¥å¹¶è®¾ç½®æƒé™
chmod 600 /Users/xierui/Documents/Project/Other/erp-system/tengxunyun.pem

# ç¡®è®¤ä½¿ç”¨ubuntuç”¨æˆ·
ssh -i /Users/xierui/Documents/Project/Other/erp-system/tengxunyun.pem ubuntu@101.33.244.240
```

### é—®é¢˜2: Connection timeout

**åŸå› ï¼š** å®‰å…¨ç»„æœªå¼€æ”¾22ç«¯å£æˆ–æœåŠ¡å™¨æœªè¿è¡Œ

**è§£å†³ï¼š**
1. ç™»å½•è…¾è®¯äº‘æ§åˆ¶å°
2. æ£€æŸ¥æœåŠ¡å™¨è¿è¡ŒçŠ¶æ€
3. æ£€æŸ¥å®‰å…¨ç»„è§„åˆ™ï¼Œç¡®ä¿22ç«¯å£å·²å¼€æ”¾

### é—®é¢˜3: Host key verification failed

**è§£å†³ï¼š**
```bash
# åˆ é™¤æ—§çš„known_hostsè®°å½•
ssh-keygen -R 101.33.244.240

# æˆ–ä½¿ç”¨ -o StrictHostKeyChecking=no å‚æ•°
ssh -i /Users/xierui/Documents/Project/Other/erp-system/tengxunyun.pem -o StrictHostKeyChecking=no ubuntu@101.33.244.240
```

## ğŸ“ ä¸‹ä¸€æ­¥æ“ä½œ

è¿æ¥æˆåŠŸåï¼Œå¯ä»¥ï¼š

1. **æ£€æŸ¥ç³»ç»ŸçŠ¶æ€**
   ```bash
   sudo systemctl status docker
   sudo /etc/init.d/bt status
   ```

2. **æŸ¥çœ‹éƒ¨ç½²çš„æœåŠ¡**
   ```bash
   cd /opt/erp-system/script/docker
   docker-compose -f docker-compose.prod.yml ps
   ```

3. **è®¿é—®å®å¡”é¢æ¿**
   - æ‰“å¼€ï¼šhttps://101.33.244.240:13794/5343ca33
   - ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç ç™»å½•

---

**æœ€åæ›´æ–°ï¼š** 2025-12-06  
**ç§é’¥æ–‡ä»¶ï¼š** `/Users/xierui/Documents/Project/Other/erp-system/tengxunyun.pem`

