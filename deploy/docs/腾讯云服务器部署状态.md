# è…¾è®¯äº‘æœåŠ¡å™¨éƒ¨ç½²çŠ¶æ€

**æœåŠ¡å™¨IPï¼š** `101.33.244.240`  
**éƒ¨ç½²æ—¶é—´ï¼š** 2025-12-06  
**é¡¹ç›®è·¯å¾„ï¼š** `/opt/erp-system/`

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. é¡¹ç›®ä¸Šä¼ 
- âœ… é¡¹ç›®ä»£ç å·²ä¸Šä¼ åˆ°æœåŠ¡å™¨
- âœ… æŽ’é™¤ä¸å¿…è¦çš„æ–‡ä»¶ï¼ˆnode_modulesã€targetç­‰ï¼‰
- âœ… é¡¹ç›®ç»“æž„å®Œæ•´

### 2. åŽç«¯æ‰“åŒ…
- âœ… **çŠ¶æ€ï¼š** æ‰“åŒ…æˆåŠŸ
- âœ… **æ–‡ä»¶ï¼š** `yudao-server/target/yudao-server.jar`
- âœ… **å¤§å°ï¼š** 229MB
- âœ… **æ—¶é—´ï¼š** 2025-12-06 10:30

### 3. å‰ç«¯æ‰“åŒ…
- âœ… **çŠ¶æ€ï¼š** æ‰“åŒ…æˆåŠŸ
- âœ… **ç›®å½•ï¼š** `original-yudao-ui/dist-prod/`
- âœ… **å¤§å°ï¼š** 26MB
- âœ… **æ–‡ä»¶æ•°ï¼š** 1832ä¸ªæ–‡ä»¶
- âœ… **æ—¶é—´ï¼š** 2025-12-06 13:02

### 4. çŽ¯å¢ƒé…ç½®
- âœ… çŽ¯å¢ƒå˜é‡æ–‡ä»¶å·²åˆ›å»ºï¼š`script/docker/.env`
- âœ… æ•°æ®åº“å¯†ç å·²é…ç½®
- âœ… Rediså¯†ç å·²é…ç½®
- âœ… Dockeré•œåƒåŠ é€Ÿå™¨å·²é…ç½®

### 5. æœåŠ¡å™¨çŽ¯å¢ƒ
- âœ… Docker 28.2.2 å·²å®‰è£…
- âœ… Docker Compose 1.29.2 å·²å®‰è£…
- âœ… Java 1.8.0_472 å·²å®‰è£…
- âœ… Maven 3.8.7 å·²å®‰è£…
- âœ… Node.js 18.20.8 å·²å®‰è£…
- âœ… npm 10.8.2 å·²å®‰è£…

## â³ å¾…å®Œæˆçš„å·¥ä½œ

### 1. Dockeré•œåƒå‡†å¤‡

**éœ€è¦çš„åŸºç¡€é•œåƒï¼š**
- `mysql:8` - æ•°æ®åº“æœåŠ¡
- `redis:6-alpine` - ç¼“å­˜æœåŠ¡
- `eclipse-temurin:8-jre` - Javaè¿è¡ŒçŽ¯å¢ƒï¼ˆåŽç«¯é•œåƒéœ€è¦ï¼‰
- `nginx:alpine` - WebæœåŠ¡å™¨ï¼ˆå‰ç«¯é•œåƒéœ€è¦ï¼‰

**éœ€è¦æž„å»ºçš„åº”ç”¨é•œåƒï¼š**
- `yudao-server:latest` - åŽç«¯æœåŠ¡é•œåƒ
- `yudao-admin:latest` - å‰ç«¯æœåŠ¡é•œåƒ

### 2. å½“å‰é—®é¢˜

**ç½‘ç»œè¿žæŽ¥é—®é¢˜ï¼š**
- âŒ æ— æ³•è¿žæŽ¥åˆ°Docker Hubæ‹‰å–é•œåƒ
- âŒ é”™è¯¯ï¼š`net/http: request canceled while waiting for connection`

**è§£å†³æ–¹æ¡ˆï¼š**

#### æ–¹æ¡ˆ1ï¼šé€šè¿‡å®å¡”é¢æ¿å¯¼å…¥é•œåƒï¼ˆæŽ¨èï¼‰
1. ç™»å½•å®å¡”é¢æ¿ï¼šhttps://101.33.244.240:13794/5343ca33
2. è¿›å…¥ **Docker** â†’ **é•œåƒç®¡ç†**
3. å¦‚æžœæœ‰é•œåƒæ–‡ä»¶ï¼ˆ.tarï¼‰ï¼Œç‚¹å‡» **å¯¼å…¥é•œåƒ**
4. æˆ–ä½¿ç”¨ **é•œåƒæ‹‰å–** åŠŸèƒ½ï¼ˆå¯èƒ½ä¹Ÿéœ€è¦ç½‘ç»œï¼‰

#### æ–¹æ¡ˆ2ï¼šä½¿ç”¨VPN/ä»£ç†
```bash
# é…ç½®Dockerä»£ç†
sudo mkdir -p /etc/systemd/system/docker.service.d
sudo tee /etc/systemd/system/docker.service.d/http-proxy.conf > /dev/null <<EOF
[Service]
Environment="HTTP_PROXY=http://proxy:port"
Environment="HTTPS_PROXY=http://proxy:port"
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
```

#### æ–¹æ¡ˆ3ï¼šæ‰‹åŠ¨ä¸Šä¼ é•œåƒæ–‡ä»¶
å¦‚æžœæœ‰é•œåƒåŽ‹ç¼©åŒ…ï¼Œå¯ä»¥ï¼š
```bash
# ä¸Šä¼ é•œåƒæ–‡ä»¶åˆ°æœåŠ¡å™¨
scp image.tar tengxunyun:/tmp/

# å¯¼å…¥é•œåƒ
ssh tengxunyun
docker load < /tmp/image.tar
```

#### æ–¹æ¡ˆ4ï¼šä½¿ç”¨å›½å†…é•œåƒæºï¼ˆå·²é…ç½®ä½†å¯èƒ½ä»éœ€VPNï¼‰
å·²é…ç½®çš„é•œåƒåŠ é€Ÿå™¨ï¼š
- https://docker.mirrors.ustc.edu.cn
- https://hub-mirror.c.163.com
- https://mirror.baidubce.com

## ðŸ“‹ éƒ¨ç½²æ­¥éª¤ï¼ˆé•œåƒå‡†å¤‡å¥½åŽï¼‰

### 1. æž„å»ºåº”ç”¨é•œåƒ
```bash
cd /opt/erp-system/script/docker
docker-compose -f docker-compose.prod.yml --env-file .env build server admin
```

### 2. å¯åŠ¨æ‰€æœ‰æœåŠ¡
```bash
cd /opt/erp-system/script/docker
docker-compose -f docker-compose.prod.yml --env-file .env up -d
```

### 3. æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
docker-compose -f docker-compose.prod.yml ps
docker-compose -f docker-compose.prod.yml logs -f
```

### 4. éªŒè¯éƒ¨ç½²
- **å‰ç«¯ï¼š** http://101.33.244.240
- **åŽç«¯APIï¼š** http://101.33.244.240:48080
- **å¥åº·æ£€æŸ¥ï¼š** http://101.33.244.240:48080/actuator/health

## ðŸ” é…ç½®ä¿¡æ¯

### çŽ¯å¢ƒå˜é‡ï¼ˆå·²é…ç½®ï¼‰
- **MySQL Rootå¯†ç ï¼š** `Erp@2025!Secure`
- **æ•°æ®æºå¯†ç ï¼š** `Erp@2025!Secure`
- **Rediså¯†ç ï¼š** `Redis@2025!Secure`

âš ï¸ **é‡è¦ï¼š** ç”Ÿäº§çŽ¯å¢ƒè¯·ä¿®æ”¹ä¸ºæ›´å®‰å…¨çš„å¯†ç ï¼

### é»˜è®¤ç™»å½•è´¦å·
- **ç”¨æˆ·åï¼š** admin
- **å¯†ç ï¼š** admin123
- âš ï¸ é¦–æ¬¡ç™»å½•åŽè¯·ç«‹å³ä¿®æ”¹å¯†ç ï¼

## ðŸ“ ä¸‹ä¸€æ­¥æ“ä½œ

1. **è§£å†³ç½‘ç»œé—®é¢˜** - é€šè¿‡å®å¡”é¢æ¿æˆ–VPNå¯¼å…¥/æ‹‰å–Dockeré•œåƒ
2. **æž„å»ºåº”ç”¨é•œåƒ** - æž„å»ºåŽç«¯å’Œå‰ç«¯Dockeré•œåƒ
3. **å¯åŠ¨æœåŠ¡** - ä½¿ç”¨Docker Composeå¯åŠ¨æ‰€æœ‰æœåŠ¡
4. **éªŒè¯éƒ¨ç½²** - æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
5. **é…ç½®åŸŸå** - å¦‚éœ€è¦ï¼Œé…ç½®åŸŸåå’ŒSSLè¯ä¹¦

## ðŸ”— ç›¸å…³æ–‡æ¡£

- [è…¾è®¯äº‘æœåŠ¡å™¨è¿žæŽ¥æŒ‡å—](./è…¾è®¯äº‘æœåŠ¡å™¨è¿žæŽ¥æŒ‡å—.md)
- [å®å¡”é¢æ¿ç™»å½•ä¿¡æ¯](./å®å¡”é¢æ¿ç™»å½•ä¿¡æ¯.md)
- [å¿«é€Ÿéƒ¨ç½²æŒ‡å—](../å¿«é€Ÿéƒ¨ç½².md)

---

**æœ€åŽæ›´æ–°ï¼š** 2025-12-06 13:10

