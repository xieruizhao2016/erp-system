# ç«å±±å¼•æ“äº‘æœåŠ¡å™¨ - å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²

### ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡æœåŠ¡å™¨

1. **è¿æ¥æœåŠ¡å™¨**
```bash
ssh root@ä½ çš„æœåŠ¡å™¨IP
```

2. **è¿è¡Œå¿«é€Ÿéƒ¨ç½²è„šæœ¬**
```bash
# ä¸Šä¼ é¡¹ç›®åˆ°æœåŠ¡å™¨å
cd /opt/erp-system
chmod +x scripts/quick-deploy.sh
./scripts/quick-deploy.sh
```

### ç¬¬äºŒæ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡

```bash
cd /opt/erp-system/script/docker
cp env.prod.example .env
vi .env  # æˆ–ä½¿ç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨
```

**å¿…é¡»ä¿®æ”¹çš„é…ç½®ï¼š**
- `MYSQL_ROOT_PASSWORD`: æ•°æ®åº“rootå¯†ç 
- `MASTER_DATASOURCE_PASSWORD`: æ•°æ®åº“è¿æ¥å¯†ç 
- `SLAVE_DATASOURCE_PASSWORD`: ä»åº“è¿æ¥å¯†ç 
- `REDIS_PASSWORD`: Rediså¯†ç ï¼ˆå»ºè®®è®¾ç½®ï¼‰

### ç¬¬ä¸‰æ­¥ï¼šæ„å»ºåç«¯ï¼ˆå¦‚éœ€è¦ï¼‰

å¦‚æœåç«¯JARæ–‡ä»¶ä¸å­˜åœ¨ï¼Œéœ€è¦å…ˆæ„å»ºï¼š

```bash
cd /opt/erp-system
mvn clean package -DskipTests
```

### ç¬¬å››æ­¥ï¼šå¯åŠ¨æœåŠ¡

```bash
cd /opt/erp-system/script/docker
docker-compose -f docker-compose.prod.yml up -d --build
```

### ç¬¬äº”æ­¥ï¼šéªŒè¯éƒ¨ç½²

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.prod.yml ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs -f

# è®¿é—®å‰ç«¯
# http://ä½ çš„æœåŠ¡å™¨IP

# è®¿é—®åç«¯API
# http://ä½ çš„æœåŠ¡å™¨IP:48080
```

---

## ğŸ“ é»˜è®¤è´¦å·

- **ç”¨æˆ·å**: admin
- **å¯†ç **: admin123

âš ï¸ **é¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹å¯†ç ï¼**

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
cd /opt/erp-system/script/docker
docker-compose -f docker-compose.prod.yml ps
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs -f

# ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs -f server
docker-compose -f docker-compose.prod.yml logs -f admin
```

### é‡å¯æœåŠ¡
```bash
docker-compose -f docker-compose.prod.yml restart
```

### åœæ­¢æœåŠ¡
```bash
docker-compose -f docker-compose.prod.yml down
```

### æ›´æ–°æœåŠ¡
```bash
# æ‹‰å–æœ€æ–°ä»£ç å
docker-compose -f docker-compose.prod.yml up -d --build
```

---

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### æœåŠ¡æ— æ³•å¯åŠ¨
```bash
# æ£€æŸ¥DockeræœåŠ¡
systemctl status docker

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 48080
netstat -tlnp | grep 80
```

### æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥MySQLå®¹å™¨
docker ps | grep mysql
docker logs yudao-mysql-prod

# æµ‹è¯•æ•°æ®åº“è¿æ¥
docker exec -it yudao-mysql-prod mysql -u root -p
```

### æŸ¥çœ‹è¯¦ç»†é”™è¯¯
```bash
# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs

# æŸ¥çœ‹ç‰¹å®šå®¹å™¨æ—¥å¿—
docker logs yudao-server-prod
docker logs yudao-admin-prod
```

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

- **å®Œæ•´éƒ¨ç½²æŒ‡å—**: [ç«å±±å¼•æ“éƒ¨ç½²æŒ‡å—.md](./ç«å±±å¼•æ“éƒ¨ç½²æŒ‡å—.md)
- **éƒ¨ç½²æ£€æŸ¥æ¸…å•**: [éƒ¨ç½²æ£€æŸ¥æ¸…å•.md](./éƒ¨ç½²æ£€æŸ¥æ¸…å•.md)

---

## âš ï¸ é‡è¦æç¤º

1. **å®‰å…¨ç¬¬ä¸€**
   - ä¿®æ”¹æ‰€æœ‰é»˜è®¤å¯†ç 
   - é…ç½®é˜²ç«å¢™è§„åˆ™
   - å¯ç”¨HTTPSï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

2. **å®šæœŸå¤‡ä»½**
   - æ•°æ®åº“å¤‡ä»½
   - é…ç½®æ–‡ä»¶å¤‡ä»½
   - ä¸Šä¼ æ–‡ä»¶å¤‡ä»½

3. **ç›‘æ§ç»´æŠ¤**
   - å®šæœŸæ£€æŸ¥æ—¥å¿—
   - ç›‘æ§æœåŠ¡å™¨èµ„æº
   - åŠæ—¶æ›´æ–°ç³»ç»Ÿ

---

## ğŸ†˜ è·å–å¸®åŠ©

é‡åˆ°é—®é¢˜ï¼Ÿ
1. æŸ¥çœ‹ [å®Œæ•´éƒ¨ç½²æŒ‡å—](./ç«å±±å¼•æ“éƒ¨ç½²æŒ‡å—.md)
2. æŸ¥çœ‹ [éƒ¨ç½²æ£€æŸ¥æ¸…å•](./éƒ¨ç½²æ£€æŸ¥æ¸…å•.md)
3. æ£€æŸ¥æœåŠ¡æ—¥å¿—
4. æäº¤Issueè·å–å¸®åŠ©

---

**ç¥éƒ¨ç½²é¡ºåˆ©ï¼** ğŸ‰

