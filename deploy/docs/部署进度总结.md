# ERPç³»ç»Ÿéƒ¨ç½²è¿›åº¦æ€»ç»“

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. æœåŠ¡å™¨åŸºç¡€é…ç½®
- âœ… SSHå¯†é’¥è¿æ¥é…ç½®å®Œæˆ
- âœ… ç³»ç»Ÿåˆå§‹åŒ–ï¼ˆæ—¶åŒºã€å·¥å…·å®‰è£…ï¼‰
- âœ… Docker 29.1.1 å·²å®‰è£…
- âœ… Docker Compose v2.40.3 å·²å®‰è£…
- âœ… å®å¡”é¢æ¿å·²å®‰è£…å¹¶å¯ä»¥è®¿é—®

### 2. Dockeré•œåƒå¯¼å…¥
- âœ… **mysql:8** - å·²å¯¼å…¥å¹¶è¿è¡Œ
- âœ… **redis:6-alpine** - å·²å¯¼å…¥å¹¶è¿è¡Œ
- âœ… **node:18-alpine** - å·²å¯¼å…¥ï¼ˆç”¨äºå‰ç«¯æ„å»ºï¼‰
- âœ… **nginx:alpine** - å·²å¯¼å…¥ï¼ˆç”¨äºå‰ç«¯è¿è¡Œï¼‰
- âœ… **eclipse-temurin:8-jre** - å·²å¯¼å…¥ï¼ˆç”¨äºåç«¯è¿è¡Œï¼‰

### 3. åº”ç”¨é•œåƒæ„å»º
- âœ… **yudao-server:latest** - åç«¯é•œåƒå·²æ„å»ºæˆåŠŸ
- â³ **yudao-admin:latest** - å‰ç«¯é•œåƒæ„å»ºä¸­ï¼ˆä½¿ç”¨npmé•œåƒæºï¼‰

### 4. æœåŠ¡çŠ¶æ€
- âœ… **MySQL** - è¿è¡Œä¸­ï¼Œå¥åº·æ£€æŸ¥é€šè¿‡
- âœ… **Redis** - è¿è¡Œä¸­ï¼Œå¥åº·æ£€æŸ¥é€šè¿‡
- âœ… **åç«¯æœåŠ¡** - å·²å¯åŠ¨ï¼Œè¿è¡Œä¸­
- â³ **å‰ç«¯æœåŠ¡** - ç­‰å¾…é•œåƒæ„å»ºå®Œæˆ

## ğŸ“‹ å½“å‰è¿›åº¦

**å®Œæˆåº¦ï¼šçº¦85%**

- âœ… åŸºç¡€ç¯å¢ƒï¼š100%
- âœ… æ•°æ®åº“æœåŠ¡ï¼š100%
- âœ… åç«¯æœåŠ¡ï¼š100%
- â³ å‰ç«¯æœåŠ¡ï¼šæ„å»ºä¸­

## ğŸ”„ å‰ç«¯æ„å»ºçŠ¶æ€

å‰ç«¯é•œåƒæ­£åœ¨æ„å»ºä¸­ï¼Œä½¿ç”¨äº†npmé•œåƒæºï¼ˆhttps://registry.npmmirror.comï¼‰åº”è¯¥ä¼šæ›´å¿«ã€‚

**æ„å»ºè¿‡ç¨‹åŒ…æ‹¬ï¼š**
1. å®‰è£…pnpm
2. å®‰è£…npmä¾èµ–ï¼ˆä½¿ç”¨å›½å†…é•œåƒæºï¼‰
3. æ„å»ºVueé¡¹ç›®
4. æ‰“åŒ…åˆ°nginxé•œåƒ

**é¢„è®¡æ—¶é—´ï¼š** 5-15åˆ†é’Ÿï¼ˆå–å†³äºç½‘ç»œé€Ÿåº¦ï¼‰

## ğŸ“ ä¸‹ä¸€æ­¥æ“ä½œ

### å¦‚æœå‰ç«¯æ„å»ºå®Œæˆ

åœ¨å®å¡”ç»ˆç«¯æˆ–SSHä¸­æ‰§è¡Œï¼š

```bash
cd /opt/erp-system/script/docker

# å¯åŠ¨å‰ç«¯æœåŠ¡
docker compose -f docker-compose.prod.yml --env-file .env up -d admin

# æ£€æŸ¥æ‰€æœ‰æœåŠ¡çŠ¶æ€
docker compose -f docker-compose.prod.yml ps

# æŸ¥çœ‹æ—¥å¿—
docker compose -f docker-compose.prod.yml logs -f
```

### å¦‚æœå‰ç«¯æ„å»ºå¤±è´¥

å¯ä»¥å°è¯•ï¼š

1. **æ£€æŸ¥æ„å»ºæ—¥å¿—**
   ```bash
   docker compose -f docker-compose.prod.yml --env-file .env build admin 2>&1 | tee build.log
   ```

2. **ä½¿ç”¨ç®€åŒ–æ„å»º**ï¼ˆå¦‚æœæœ¬åœ°å¯ä»¥æ„å»ºï¼‰
   - åœ¨æœ¬åœ°æ„å»ºå‰ç«¯ï¼š`pnpm build:prod`
   - ä¸Šä¼ distç›®å½•åˆ°æœåŠ¡å™¨
   - ä½¿ç”¨ç®€åŒ–çš„Dockerfileï¼ˆåªå¤åˆ¶distï¼Œä¸æ„å»ºï¼‰

3. **æ£€æŸ¥ç½‘ç»œè¿æ¥**
   - ç¡®è®¤npmé•œåƒæºå¯è®¿é—®
   - æˆ–ç­‰å¾…ç½‘ç»œæ¢å¤

## ğŸ¯ è®¿é—®åœ°å€

éƒ¨ç½²å®Œæˆåï¼š

- **å‰ç«¯åœ°å€**: http://115.190.240.137
- **åç«¯API**: http://115.190.240.137:48080
- **é»˜è®¤è´¦å·**: admin / admin123

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
cd /opt/erp-system/script/docker
docker compose -f docker-compose.prod.yml ps
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# æ‰€æœ‰æœåŠ¡
docker compose -f docker-compose.prod.yml logs -f

# ç‰¹å®šæœåŠ¡
docker compose -f docker-compose.prod.yml logs -f server
docker compose -f docker-compose.prod.yml logs -f admin
```

### é‡å¯æœåŠ¡
```bash
docker compose -f docker-compose.prod.yml restart
```

### åœæ­¢æœåŠ¡
```bash
docker compose -f docker-compose.prod.yml down
```

---

**æç¤º**: å¦‚æœSSHè¿æ¥æœ‰é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡å®å¡”é¢æ¿çš„ç»ˆç«¯ç»§ç»­æ“ä½œã€‚

