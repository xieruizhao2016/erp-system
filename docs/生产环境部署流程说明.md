# ç”Ÿäº§ç¯å¢ƒæœ¬åœ°æ‰“åŒ…å’Œäº‘æœåŠ¡å™¨éƒ¨ç½²æµç¨‹è¯´æ˜

## ğŸ“‹ ç›®å½•
1. [å‡†å¤‡å·¥ä½œ](#å‡†å¤‡å·¥ä½œ)
2. [è¯·æ±‚åœ°å€é…ç½®æ£€æŸ¥æ¸…å•](#è¯·æ±‚åœ°å€é…ç½®æ£€æŸ¥æ¸…å•)
3. [æœ¬åœ°æ‰“åŒ…æµç¨‹](#æœ¬åœ°æ‰“åŒ…æµç¨‹)
4. [ä¸Šä¼ åˆ°äº‘æœåŠ¡å™¨](#ä¸Šä¼ åˆ°äº‘æœåŠ¡å™¨)
5. [äº‘æœåŠ¡å™¨éƒ¨ç½²](#äº‘æœåŠ¡å™¨éƒ¨ç½²)
6. [éªŒè¯å’Œæµ‹è¯•](#éªŒè¯å’Œæµ‹è¯•)
7. [å¸¸è§é—®é¢˜æ’æŸ¥](#å¸¸è§é—®é¢˜æ’æŸ¥)

---

## å‡†å¤‡å·¥ä½œ

### 1. ç¡®è®¤äº‘æœåŠ¡å™¨ä¿¡æ¯
- **æœåŠ¡å™¨IP**: `101.33.244.240`
- **SSHå¯†é’¥**: `tengxunyun.pem`
- **æœåŠ¡å™¨ç”¨æˆ·**: `ubuntu`
- **é¡¹ç›®è·¯å¾„**: `/opt/erp-system`

### 2. ç¡®è®¤æœ¬åœ°ç¯å¢ƒ
- **é¡¹ç›®æ ¹ç›®å½•**: `/Users/xierui/Documents/Project/Other/erp-system`
- **å‰ç«¯ç›®å½•**: `original-yudao-ui`
- **åç«¯ç›®å½•**: `yudao-server`
- **æ„å»ºå·¥å…·**: Maven (åç«¯), pnpm (å‰ç«¯)

---

## è¯·æ±‚åœ°å€é…ç½®æ£€æŸ¥æ¸…å• âš ï¸

**è¿™æ˜¯æœ€å®¹æ˜“å‡ºé”™çš„åœ°æ–¹ï¼Œéƒ¨ç½²å‰å¿…é¡»é€ä¸€æ£€æŸ¥ï¼**

### âœ… å‰ç«¯é…ç½®æ£€æŸ¥

#### 1. ç¯å¢ƒå˜é‡æ–‡ä»¶ `.env.prod`
**æ–‡ä»¶è·¯å¾„**: `original-yudao-ui/.env.prod`

```bash
# âœ… æ­£ç¡®é…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»è¿™æ ·ï¼‰
VITE_BASE_URL=''
VITE_API_URL=/prod-api
```

**âŒ é”™è¯¯é…ç½®ç¤ºä¾‹**:
```bash
# é”™è¯¯1: åŒ…å«å®Œæ•´URLï¼ˆä¼šå¯¼è‡´ç›´æ¥è¯·æ±‚åç«¯ï¼Œç»•è¿‡Nginxï¼‰
VITE_BASE_URL='http://101.33.244.240:48080'
VITE_API_URL=/admin-api

# é”™è¯¯2: ä½¿ç”¨localhostï¼ˆæœ¬åœ°æ— æ³•è®¿é—®äº‘æœåŠ¡å™¨ï¼‰
VITE_BASE_URL='http://localhost:48080'
VITE_API_URL=/admin-api
```

**æ£€æŸ¥å‘½ä»¤**:
```bash
cd original-yudao-ui
cat .env.prod | grep -E "VITE_BASE_URL|VITE_API_URL"
```

#### 2. Docker Compose é…ç½®
**æ–‡ä»¶è·¯å¾„**: `script/docker/docker-compose.prod.yml`

```yaml
admin:
  build:
    args:
      VITE_BASE_URL: ${VITE_BASE_URL:-}  # âœ… ç©ºå­—ç¬¦ä¸²
      VITE_API_URL: ${VITE_API_URL:-/prod-api}  # âœ… /prod-api
```

**æ£€æŸ¥å‘½ä»¤**:
```bash
grep -A 2 "VITE_BASE_URL\|VITE_API_URL" script/docker/docker-compose.prod.yml
```

#### 3. Nginx é…ç½®
**æ–‡ä»¶è·¯å¾„**: `original-yudao-ui/nginx.conf`

```nginx
# âœ… æ­£ç¡®é…ç½®
location /prod-api {
    rewrite ^/prod-api/(.*) /admin-api/$1 break;  # è·¯å¾„é‡å†™
    proxy_pass http://yudao-server-prod:8080;  # âœ… å®¹å™¨å:ç«¯å£
    # ... å…¶ä»–é…ç½®
}
```

**âŒ é”™è¯¯é…ç½®**:
```nginx
# é”™è¯¯: ä½¿ç”¨é”™è¯¯çš„å®¹å™¨å
proxy_pass http://server:8080;  # âŒ åº”è¯¥æ˜¯ yudao-server-prod
```

**æ£€æŸ¥å‘½ä»¤**:
```bash
grep -A 5 "proxy_pass" original-yudao-ui/nginx.conf
```

### âœ… åç«¯é…ç½®æ£€æŸ¥

#### 1. ç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶
**æ–‡ä»¶è·¯å¾„**: `yudao-server/src/main/resources/application-prod.yaml`

```yaml
server:
  port: 8080  # âœ… å®¹å™¨å†…ç«¯å£ï¼Œé€šè¿‡Dockeræ˜ å°„åˆ°å¤–éƒ¨48080

yudao:
  captcha:
    enable: false  # âœ… ç¦ç”¨éªŒè¯ç 
  pay:
    order-notify-url: http://101.33.244.240:48080/admin-api/pay/notify/order
    refund-notify-url: http://101.33.244.240:48080/admin-api/pay/notify/refund
    transfer-notify-url: http://101.33.244.240:48080/admin-api/pay/notify/transfer

spring:
  redis:
    host: ${REDIS_HOST:-yudao-redis-prod}
    port: ${REDIS_PORT:-6379}
    password: ${REDIS_PASSWORD:-Redis@2025!Secure}
    database: ${REDIS_DATABASE:-1}
```

**æ£€æŸ¥å‘½ä»¤**:
```bash
grep -E "port:|captcha.enable|redis.host" yudao-server/src/main/resources/application-prod.yaml
```

#### 2. Docker Compose åç«¯é…ç½®
**æ–‡ä»¶è·¯å¾„**: `script/docker/docker-compose.prod.yml`

```yaml
server:
  container_name: yudao-server-prod  # âœ… å®¹å™¨å
  ports:
    - "48080:8080"  # âœ… å¤–éƒ¨:å†…éƒ¨ç«¯å£æ˜ å°„
  environment:
    SPRING_PROFILES_ACTIVE: prod
    REDIS_HOST: yudao-redis-prod
    REDIS_PASSWORD: Redis@2025!Secure
```

---

## æœ¬åœ°æ‰“åŒ…æµç¨‹

### æ­¥éª¤1: æ£€æŸ¥è¯·æ±‚åœ°å€é…ç½®

**æ‰§è¡Œæ£€æŸ¥æ¸…å•**:
```bash
# 1. æ£€æŸ¥å‰ç«¯ç¯å¢ƒå˜é‡
echo "=== æ£€æŸ¥å‰ç«¯é…ç½® ==="
cd original-yudao-ui
cat .env.prod | grep -E "VITE_BASE_URL|VITE_API_URL"
echo ""

# 2. æ£€æŸ¥Nginxé…ç½®
echo "=== æ£€æŸ¥Nginxé…ç½® ==="
grep -A 3 "proxy_pass" nginx.conf
echo ""

# 3. æ£€æŸ¥åç«¯é…ç½®
echo "=== æ£€æŸ¥åç«¯é…ç½® ==="
cd ../yudao-server/src/main/resources
grep -E "port:|captcha.enable" application-prod.yaml
```

**é¢„æœŸç»“æœ**:
- `VITE_BASE_URL=''` (ç©ºå­—ç¬¦ä¸²)
- `VITE_API_URL=/prod-api`
- `proxy_pass http://yudao-server-prod:8080`
- `server.port: 8080`

### æ­¥éª¤2: æ„å»ºå‰ç«¯

```bash
cd /Users/xierui/Documents/Project/Other/erp-system/original-yudao-ui

# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœéœ€è¦ï¼‰
pnpm install

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build:prod

# éªŒè¯æ„å»ºäº§ç‰©
ls -lh dist-prod/
# åº”è¯¥çœ‹åˆ°: index.html, assets/, favicon.ico, logo.gif
```

**æ„å»ºè¾“å‡º**: `original-yudao-ui/dist-prod/`

### æ­¥éª¤3: æ„å»ºåç«¯

```bash
cd /Users/xierui/Documents/Project/Other/erp-system

# æ¸…ç†å¹¶æ„å»ºï¼ˆè·³è¿‡æµ‹è¯•ï¼‰
mvn clean package -DskipTests -pl yudao-server -am

# éªŒè¯æ„å»ºäº§ç‰©
ls -lh yudao-server/target/yudao-server.jar
# æ–‡ä»¶å¤§å°çº¦ 228MB
```

**æ„å»ºè¾“å‡º**: `yudao-server/target/yudao-server.jar`

---

## ä¸Šä¼ åˆ°äº‘æœåŠ¡å™¨

### æ­¥éª¤1: ä¸Šä¼ å‰ç«¯æ–‡ä»¶

```bash
cd /Users/xierui/Documents/Project/Other/erp-system

# ä¸Šä¼ å‰ç«¯æ„å»ºäº§ç‰©
scp -i tengxunyun.pem -o StrictHostKeyChecking=no \
  -r original-yudao-ui/dist-prod/* \
  ubuntu@101.33.244.240:/tmp/dist-prod/

# éªŒè¯ä¸Šä¼ 
ssh -i tengxunyun.pem -o StrictHostKeyChecking=no \
  ubuntu@101.33.244.240 "ls -la /tmp/dist-prod/ | head -10"
```

### æ­¥éª¤2: ä¸Šä¼ åç«¯jaråŒ…

```bash
# ä¸Šä¼ jaråŒ…
scp -i tengxunyun.pem -o StrictHostKeyChecking=no \
  yudao-server/target/yudao-server.jar \
  ubuntu@101.33.244.240:/opt/erp-system/yudao-server/target/yudao-server.jar

# éªŒè¯ä¸Šä¼ 
ssh -i tengxunyun.pem -o StrictHostKeyChecking=no \
  ubuntu@101.33.244.240 "ls -lh /opt/erp-system/yudao-server/target/yudao-server.jar"
```

---

## äº‘æœåŠ¡å™¨éƒ¨ç½²

### æ­¥éª¤1: æ›´æ–°å‰ç«¯å®¹å™¨

```bash
ssh -i tengxunyun.pem -o StrictHostKeyChecking=no ubuntu@101.33.244.240 << 'EOF'
# å°†å‰ç«¯æ–‡ä»¶å¤åˆ¶åˆ°å®¹å™¨
docker cp /tmp/dist-prod/. yudao-admin-prod:/usr/share/nginx/html/

# éªŒè¯æ–‡ä»¶å·²æ›´æ–°
docker exec yudao-admin-prod ls -la /usr/share/nginx/html/ | head -10

# æµ‹è¯•å‰ç«¯æœåŠ¡
docker exec yudao-admin-prod curl -s http://localhost/ | grep -o '<title>.*</title>'
EOF
```

### æ­¥éª¤2: æ›´æ–°åç«¯å®¹å™¨

```bash
ssh -i tengxunyun.pem -o StrictHostKeyChecking=no ubuntu@101.33.244.240 << 'EOF'
# å¤åˆ¶jaråŒ…åˆ°å®¹å™¨
docker cp /opt/erp-system/yudao-server/target/yudao-server.jar \
  yudao-server-prod:/yudao-server/app.jar

# é‡å¯åç«¯æœåŠ¡
docker restart yudao-server-prod

# ç­‰å¾…æœåŠ¡å¯åŠ¨ï¼ˆçº¦60ç§’ï¼‰
echo "ç­‰å¾…æœåŠ¡å¯åŠ¨..."
sleep 60

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker logs --tail=20 yudao-server-prod | grep -E "Started YudaoServerApplication|ERROR"
EOF
```

### æ­¥éª¤3: éªŒè¯æœåŠ¡å¥åº·çŠ¶æ€

```bash
ssh -i tengxunyun.pem -o StrictHostKeyChecking=no ubuntu@101.33.244.240 << 'EOF'
# æ£€æŸ¥åç«¯å¥åº·çŠ¶æ€
echo "åç«¯å¥åº·æ£€æŸ¥:"
docker exec yudao-server-prod curl -s -o /dev/null -w '%{http_code}\n' \
  http://localhost:8080/actuator/health

# æ£€æŸ¥å‰ç«¯å¥åº·çŠ¶æ€
echo "å‰ç«¯å¥åº·æ£€æŸ¥:"
docker exec yudao-admin-prod curl -s -o /dev/null -w '%{http_code}\n' \
  http://localhost/health

# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker ps | grep -E "admin|server"
EOF
```

---

## éªŒè¯å’Œæµ‹è¯•

### 1. è®¿é—®æµ‹è¯•

```
è®¿é—®åœ°å€: http://101.33.244.240
```

### 2. åŠŸèƒ½æµ‹è¯•æ¸…å•

- [ ] ç™»å½•åŠŸèƒ½ï¼ˆéªŒè¯ç åº”å·²ç¦ç”¨ï¼‰
- [ ] äº§å“ç®¡ç†æ¨¡å—ï¼ˆ6ä¸ªå­æ¨¡å—ï¼‰
  - [ ] äº§å“ä¿¡æ¯
  - [ ] äº§å“åˆ†ç±»
  - [ ] äº§å“å•ä½
  - [ ] SKUç®¡ç†
  - [ ] äº§å“åŒ…è£…
  - [ ] äº§å“OEM
- [ ] ERPé¦–é¡µï¼ˆé”€å”®å’Œé‡‡è´­ç»Ÿè®¡ï¼‰
- [ ] å…¶ä»–åŠŸèƒ½æ¨¡å—

### 3. ç½‘ç»œè¯·æ±‚æ£€æŸ¥

**æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12) â†’ Network æ ‡ç­¾**

**æ£€æŸ¥APIè¯·æ±‚**:
- âœ… è¯·æ±‚è·¯å¾„åº”è¯¥æ˜¯: `/prod-api/...`
- âœ… è¯·æ±‚URLåº”è¯¥æ˜¯: `http://101.33.244.240/prod-api/...`
- âŒ ä¸åº”è¯¥çœ‹åˆ°: `http://101.33.244.240:48080/...` (ç›´æ¥è¯·æ±‚åç«¯)
- âŒ ä¸åº”è¯¥çœ‹åˆ°: `http://localhost/...` (æœ¬åœ°åœ°å€)

---

## å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1: å‰ç«¯æ˜¾ç¤º 502 Bad Gateway

**åŸå› **: Nginxæ— æ³•è¿æ¥åˆ°åç«¯æœåŠ¡

**æ’æŸ¥æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥Nginxé…ç½®ä¸­çš„å®¹å™¨å
ssh -i tengxunyun.pem ubuntu@101.33.244.240 \
  "docker exec yudao-admin-prod cat /etc/nginx/conf.d/default.conf | grep proxy_pass"

# åº”è¯¥æ˜¾ç¤º: proxy_pass http://yudao-server-prod:8080;
# å¦‚æœæ˜¾ç¤º: proxy_pass http://server:8080; åˆ™æ˜¯é”™è¯¯çš„

# 2. æ£€æŸ¥åç«¯å®¹å™¨æ˜¯å¦è¿è¡Œ
ssh -i tengxunyun.pem ubuntu@101.33.244.240 \
  "docker ps | grep yudao-server-prod"

# 3. æ£€æŸ¥ç½‘ç»œè¿æ¥
ssh -i tengxunyun.pem ubuntu@101.33.244.240 \
  "docker exec yudao-admin-prod ping -c 2 yudao-server-prod"
```

**è§£å†³æ–¹æ¡ˆ**:
- ä¿®æ”¹ `nginx.conf` ä¸­çš„ `proxy_pass` ä¸ºæ­£ç¡®çš„å®¹å™¨å
- é‡æ–°åˆ›å»ºå‰ç«¯å®¹å™¨

### é—®é¢˜2: å‰ç«¯ç›´æ¥è¯·æ±‚åç«¯IP:Port

**åŸå› **: `VITE_BASE_URL` é…ç½®äº†å®Œæ•´URL

**æ’æŸ¥æ­¥éª¤**:
```bash
# æ£€æŸ¥å‰ç«¯æ„å»ºæ—¶çš„ç¯å¢ƒå˜é‡
ssh -i tengxunyun.pem ubuntu@101.33.244.240 \
  "docker exec yudao-admin-prod find /usr/share/nginx/html -name '*.js' | \
   xargs grep -l '101.33.244.240:48080' | head -3"
```

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ `.env.prod`: `VITE_BASE_URL=''` (å¿…é¡»æ˜¯ç©ºå­—ç¬¦ä¸²)
2. é‡æ–°æ„å»ºå‰ç«¯: `pnpm build:prod`
3. é‡æ–°ä¸Šä¼ å¹¶æ›´æ–°å®¹å™¨

### é—®é¢˜3: ç™»å½•æ—¶æç¤º"éªŒè¯ç ä¸èƒ½ä¸ºç©º"

**åŸå› **: åç«¯éªŒè¯ç é…ç½®æœªç”Ÿæ•ˆ

**æ’æŸ¥æ­¥éª¤**:
```bash
# æ£€æŸ¥åç«¯é…ç½®
ssh -i tengxunyun.pem ubuntu@101.33.244.240 \
  "docker exec yudao-server-prod grep -r 'captcha.enable' /yudao-server/app.jar 2>/dev/null || \
   docker logs yudao-server-prod | grep -i captcha"
```

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®è®¤ `application-prod.yaml` ä¸­ `yudao.captcha.enable: false`
2. é‡æ–°æ„å»ºjaråŒ…
3. é‡æ–°ä¸Šä¼ å¹¶é‡å¯æœåŠ¡

### é—®é¢˜4: äº§å“ç®¡ç†æ¨¡å—ç¼ºå¤±

**åŸå› **: æ•°æ®åº“èœå•æ•°æ®æœªå¯¼å…¥

**æ’æŸ¥æ­¥éª¤**:
```bash
# æ£€æŸ¥èœå•æ•°æ®
ssh -i tengxunyun.pem ubuntu@101.33.244.240 \
  "mysql -h127.0.0.1 -uroot -p'Erp@2025!Secure' ruoyi-vue-pro -e \
   \"SELECT id, name FROM system_menu WHERE parent_id = 2564 ORDER BY sort;\""
```

**è§£å†³æ–¹æ¡ˆ**:
- æ‰§è¡Œèœå•å¯¼å…¥SQL: `sql/mysql/erp_product_missing_modules_fixed.sql`

### é—®é¢˜5: è¯·æ±‚è¶…æ—¶æˆ–è¿æ¥å¤±è´¥

**æ’æŸ¥æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥å®¹å™¨ç½‘ç»œ
ssh -i tengxunyun.pem ubuntu@101.33.244.240 \
  "docker network inspect docker_erp-network | grep -A 5 yudao-server-prod"

# 2. æ£€æŸ¥åç«¯æœåŠ¡ç«¯å£
ssh -i tengxunyun.pem ubuntu@101.33.244.240 \
  "docker exec yudao-server-prod netstat -tlnp | grep 8080"

# 3. æ£€æŸ¥é˜²ç«å¢™å’Œå®‰å…¨ç»„
# ç¡®ä¿è…¾è®¯äº‘å®‰å…¨ç»„å¼€æ”¾äº† 80 å’Œ 48080 ç«¯å£
```

---

## å¿«é€Ÿéƒ¨ç½²è„šæœ¬

åˆ›å»º `scripts/deploy-prod.sh`:

```bash
#!/bin/bash
set -e

PROJECT_ROOT="/Users/xierui/Documents/Project/Other/erp-system"
SSH_KEY="$PROJECT_ROOT/tengxunyun.pem"
SERVER="ubuntu@101.33.244.240"

echo "=== ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è„šæœ¬ ==="
echo ""

# 1. æ£€æŸ¥é…ç½®
echo "ã€æ­¥éª¤1ã€‘æ£€æŸ¥é…ç½®..."
cd $PROJECT_ROOT/original-yudao-ui
if ! grep -q "VITE_BASE_URL=''" .env.prod; then
    echo "âŒ é”™è¯¯: .env.prod ä¸­ VITE_BASE_URL ä¸æ˜¯ç©ºå­—ç¬¦ä¸²"
    exit 1
fi
echo "âœ… å‰ç«¯é…ç½®æ£€æŸ¥é€šè¿‡"

# 2. æ„å»ºå‰ç«¯
echo ""
echo "ã€æ­¥éª¤2ã€‘æ„å»ºå‰ç«¯..."
pnpm build:prod
echo "âœ… å‰ç«¯æ„å»ºå®Œæˆ"

# 3. æ„å»ºåç«¯
echo ""
echo "ã€æ­¥éª¤3ã€‘æ„å»ºåç«¯..."
cd $PROJECT_ROOT
mvn clean package -DskipTests -pl yudao-server -am
echo "âœ… åç«¯æ„å»ºå®Œæˆ"

# 4. ä¸Šä¼ æ–‡ä»¶
echo ""
echo "ã€æ­¥éª¤4ã€‘ä¸Šä¼ æ–‡ä»¶åˆ°äº‘æœåŠ¡å™¨..."
scp -i $SSH_KEY -o StrictHostKeyChecking=no -r \
  original-yudao-ui/dist-prod/* \
  $SERVER:/tmp/dist-prod/
scp -i $SSH_KEY -o StrictHostKeyChecking=no \
  yudao-server/target/yudao-server.jar \
  $SERVER:/opt/erp-system/yudao-server/target/yudao-server.jar
echo "âœ… æ–‡ä»¶ä¸Šä¼ å®Œæˆ"

# 5. éƒ¨ç½²
echo ""
echo "ã€æ­¥éª¤5ã€‘éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨..."
ssh -i $SSH_KEY -o StrictHostKeyChecking=no $SERVER << 'EOF'
# æ›´æ–°å‰ç«¯
docker cp /tmp/dist-prod/. yudao-admin-prod:/usr/share/nginx/html/
echo "âœ… å‰ç«¯æ›´æ–°å®Œæˆ"

# æ›´æ–°åç«¯
docker cp /opt/erp-system/yudao-server/target/yudao-server.jar \
  yudao-server-prod:/yudao-server/app.jar
docker restart yudao-server-prod
echo "âœ… åç«¯æ›´æ–°å®Œæˆï¼Œç­‰å¾…å¯åŠ¨..."
sleep 60

# éªŒè¯
echo ""
echo "ã€éªŒè¯ã€‘æœåŠ¡çŠ¶æ€:"
docker exec yudao-server-prod curl -s -o /dev/null -w 'åç«¯: %{http_code}\n' \
  http://localhost:8080/actuator/health
docker exec yudao-admin-prod curl -s -o /dev/null -w 'å‰ç«¯: %{http_code}\n' \
  http://localhost/health
EOF

echo ""
echo "=== éƒ¨ç½²å®Œæˆ ==="
echo "è®¿é—®åœ°å€: http://101.33.244.240"
```

**ä½¿ç”¨æ–¹æ³•**:
```bash
chmod +x scripts/deploy-prod.sh
./scripts/deploy-prod.sh
```

---

## æ€»ç»“

### âœ… å…³é”®é…ç½®è¦ç‚¹

1. **å‰ç«¯ç¯å¢ƒå˜é‡**: `VITE_BASE_URL=''` (ç©ºå­—ç¬¦ä¸²) + `VITE_API_URL=/prod-api`
2. **Nginxä»£ç†**: `/prod-api` â†’ `/admin-api` â†’ `http://yudao-server-prod:8080`
3. **åç«¯ç«¯å£**: å®¹å™¨å†… `8080`ï¼Œå¤–éƒ¨æ˜ å°„ `48080`
4. **å®¹å™¨ç½‘ç»œ**: ç¡®ä¿æ‰€æœ‰å®¹å™¨åœ¨åŒä¸€ç½‘ç»œ `docker_erp-network`

### ğŸ“ éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] å‰ç«¯ `.env.prod` é…ç½®æ­£ç¡®
- [ ] Nginx `proxy_pass` ä½¿ç”¨æ­£ç¡®çš„å®¹å™¨å
- [ ] åç«¯ `application-prod.yaml` é…ç½®æ­£ç¡®
- [ ] å‰ç«¯æ„å»ºæˆåŠŸ (`dist-prod/` ç›®å½•å­˜åœ¨)
- [ ] åç«¯æ„å»ºæˆåŠŸ (`yudao-server.jar` å­˜åœ¨)
- [ ] æ–‡ä»¶ä¸Šä¼ æˆåŠŸ
- [ ] å®¹å™¨æ–‡ä»¶æ›´æ–°æˆåŠŸ
- [ ] æœåŠ¡é‡å¯æˆåŠŸ
- [ ] å¥åº·æ£€æŸ¥é€šè¿‡
- [ ] åŠŸèƒ½æµ‹è¯•é€šè¿‡

---

**æœ€åæ›´æ–°**: 2025-12-09
**ç»´æŠ¤è€…**: ERPç³»ç»Ÿå¼€å‘å›¢é˜Ÿ

