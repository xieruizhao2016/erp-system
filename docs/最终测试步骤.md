# 最终测试步骤

## ✅ 已完成的修复

1. ✅ **清除了Redis缓存** - 解决后端缓存问题
2. ✅ **强制刷新菜单配置** - 确保所有菜单可见
3. ✅ **重启后端服务** - 清除内存缓存

## 🎯 现在请执行以下步骤

### 步骤1：等待后端服务完全启动（约15-20秒）

检查服务状态：
```bash
lsof -i :48080
```

或者访问：`http://localhost:48080/admin-api/system/auth/get-permission-info`

### 步骤2：清除浏览器缓存

**方法A：使用浏览器控制台（推荐）**

1. 打开系统页面
2. 按 `F12` 打开开发者工具
3. 在 **Console** 标签中执行：
```javascript
localStorage.clear();
sessionStorage.clear();
location.reload(true);
```

**方法B：使用无痕模式（最简单）**

1. 按 `Cmd+Shift+N` (Mac) 或 `Ctrl+Shift+N` (Windows) 打开无痕窗口
2. 访问 `http://localhost:5173`
3. 登录系统

### 步骤3：检查API响应

1. 打开开发者工具（F12）
2. 进入 **Network** 标签
3. 刷新页面
4. 找到 `/admin-api/system/auth/get-permission-info` 请求
5. 点击查看 **Response**
6. 搜索以下内容：
   - `"name":"内部入库"`
   - `"name":"内部出库"`
   - `"name":"应收账款"`
   - `"name":"应付账款"`

### 步骤4：验证结果

**如果API响应中有新菜单**：
- ✅ 后端问题已解决
- ✅ 清除浏览器缓存后，前端应该能显示菜单
- ✅ 如果前端仍不显示，检查前端路由生成逻辑

**如果API响应中仍然没有新菜单**：
- ❌ 后端仍有问题
- 可能需要检查：
  1. 多租户配置
  2. 菜单排序
  3. 菜单查询逻辑

## 📋 检查清单

- [ ] 后端服务已启动（端口48080）
- [ ] Redis缓存已清除
- [ ] 浏览器缓存已清除
- [ ] 已重新登录系统
- [ ] 已检查API响应
- [ ] API响应中包含新菜单

## 🆘 如果API响应中仍然没有新菜单

请运行以下检查：

```bash
# 检查菜单配置
./scripts/check-menu-visible.sh

# 检查角色权限
./scripts/test-menu-api-direct.sh

# 检查Redis缓存
redis-cli -p 6379 KEYS "*menu*"
```

或者提供以下信息：
1. 完整的API响应（JSON格式）
2. 后端日志（`tail -100 nohup.out`）
3. 菜单配置检查结果

