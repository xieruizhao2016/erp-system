# 生产订单字典配置说明

## ✅ 已完成的配置

### 1. 字典类型和字典数据
已创建以下字典类型和字典数据：

#### 生产订单状态（`erp_production_order_status`）
- 1 - 待开始（蓝色）
- 2 - 进行中（主色）
- 3 - 已暂停（警告色）
- 4 - 已完成（成功色）
- 5 - 已取消（危险色）

#### 优先级（`erp_production_order_priority`）
- 1 - 紧急（危险色）
- 2 - 高（警告色）
- 3 - 中（主色）
- 4 - 低（信息色）

#### 来源类型（`erp_production_order_source_type`）
- 1 - 手动创建（默认色）
- 2 - 销售订单（主色）
- 3 - 库存补充（成功色）

### 2. 前端代码配置
- ✅ 已在 `dict.ts` 中添加字典类型定义
- ✅ 表单页面已使用字典下拉选择
- ✅ 列表页面搜索表单已使用字典下拉选择
- ✅ 列表页面表头已使用字典标签显示

## 📝 如何使用字典生成功能

### 方法1：通过系统管理界面配置（推荐）

1. **登录系统**
   - 使用管理员账号登录

2. **进入字典管理**
   - 导航：**系统管理** → **字典管理** → **字典数据**

3. **查看已创建的字典**
   - 在字典类型下拉框中选择：
     - `erp_production_order_status` - 生产订单状态
     - `erp_production_order_priority` - 生产订单优先级
     - `erp_production_order_source_type` - 生产订单来源类型

4. **修改字典数据（如需要）**
   - 点击"修改"按钮
   - 可以修改标签、排序、颜色类型等
   - 保存即可生效

### 方法2：通过SQL直接配置

如果需要添加新的字典项，可以执行SQL：

```sql
-- 添加新的字典数据
INSERT INTO `system_dict_data` (`id`, `sort`, `label`, `value`, `dict_type`, `status`, `color_type`, `css_class`, `remark`, `creator`, `create_time`, `updater`, `update_time`, `deleted`) 
VALUES (3043, 6, '新状态', '6', 'erp_production_order_status', 0, 'default', '', '', '1', NOW(), '1', NOW(), b'0');
```

## 🔧 前端代码中使用字典

### 1. 在表单中使用字典（下拉选择）

```vue
<el-form-item label="状态" prop="status">
  <el-select v-model="formData.status" placeholder="请选择状态" clearable>
    <el-option
      v-for="dict in getIntDictOptions(DICT_TYPE.ERP_PRODUCTION_ORDER_STATUS)"
      :key="dict.value"
      :label="dict.label"
      :value="dict.value"
    />
  </el-select>
</el-form-item>
```

### 2. 在表单中使用字典（单选框）

```vue
<el-form-item label="状态" prop="status">
  <el-radio-group v-model="formData.status">
    <el-radio
      v-for="dict in getIntDictOptions(DICT_TYPE.ERP_PRODUCTION_ORDER_STATUS)"
      :key="dict.value"
      :value="dict.value"
    >
      {{ dict.label }}
    </el-radio>
  </el-radio-group>
</el-form-item>
```

### 3. 在列表表头显示字典标签

```vue
<el-table-column label="状态" align="center" prop="status">
  <template #default="scope">
    <dict-tag :type="DICT_TYPE.ERP_PRODUCTION_ORDER_STATUS" :value="scope.row.status" />
  </template>
</el-table-column>
```

### 4. 导入字典工具

```typescript
import { getIntDictOptions, DICT_TYPE } from '@/utils/dict'
```

## 📋 字典类型说明

### 字典类型定义位置
- 文件：`original-yudao-ui/src/utils/dict.ts`
- 枚举：`DICT_TYPE`

### 已定义的字典类型
```typescript
ERP_PRODUCTION_ORDER_STATUS = 'erp_production_order_status', // 生产订单状态
ERP_PRODUCTION_ORDER_PRIORITY = 'erp_production_order_priority', // 生产订单优先级
ERP_PRODUCTION_ORDER_SOURCE_TYPE = 'erp_production_order_source_type', // 生产订单来源类型
```

## 🎨 字典颜色类型

字典支持以下颜色类型（Element Plus 的 InfoType）：
- `default` - 默认灰色
- `primary` - 主色（蓝色）
- `success` - 成功色（绿色）
- `warning` - 警告色（橙色）
- `danger` - 危险色（红色）
- `info` - 信息色（浅蓝色）

## 🔄 刷新字典缓存

如果修改了字典数据，前端可能需要刷新才能看到最新数据：

1. **刷新浏览器页面**（最简单）
2. **清除浏览器缓存**（如果刷新无效）
3. **重新登录系统**（确保获取最新字典数据）

## 📝 注意事项

1. **字典类型命名规范**
   - 使用小写字母和下划线
   - 格式：`模块_功能_字段`
   - 例如：`erp_production_order_status`

2. **字典值类型**
   - 使用 `getIntDictOptions` 表示值是整数类型
   - 使用 `getStrDictOptions` 表示值是字符串类型
   - 使用 `getBoolDictOptions` 表示值是布尔类型

3. **字典排序**
   - 通过 `sort` 字段控制显示顺序
   - 数字越小，排序越靠前

4. **字典状态**
   - `status = 0` 表示启用
   - `status = 1` 表示停用
   - 停用的字典项不会在前端显示

## ✅ 验证

配置完成后，可以验证：

1. **表单页面**
   - 打开"新增"或"编辑"弹窗
   - 状态、优先级、来源类型字段应该显示下拉选择或单选框
   - 选项应该显示字典标签（如"待开始"、"紧急"等）

2. **列表页面**
   - 搜索表单中的状态、优先级、来源类型应该显示下拉选择
   - 列表表头中的状态、优先级、来源类型应该显示带颜色的标签

3. **数据保存**
   - 选择字典值后保存
   - 再次打开编辑，应该正确显示之前选择的值

## 🎉 完成！

字典功能已完全配置，可以正常使用了！

