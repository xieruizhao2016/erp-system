# Demo数据执行结果报告

## 📋 执行信息

- **执行时间**：2025-01
- **执行脚本**：`sql/mysql/production-order-demo.sql`
- **数据库**：ruoyi-vue-pro
- **执行状态**：✅ 成功

---

## ✅ 数据创建统计

| 数据类型 | 数量 | 状态 |
|---------|------|------|
| 产品数据 | 11 | ✅ 成功 |
| BOM主表 | 3 | ✅ 成功 |
| BOM明细 | 10 | ✅ 成功 |
| 工艺路线主表 | 3 | ✅ 成功 |
| 工艺路线明细 | 8 | ✅ 成功 |
| 生产订单 | 1 | ✅ 成功 |
| 设备 | 5 | ✅ 成功 |
| 仓库 | 3 | ✅ 成功 |

---

## 📦 创建的数据详情

### 1. 产品数据（11个）

#### 成品（1个）
- **智能手环** (ID: 2001)
  - 类型：成品 (3)
  - 规格：标准版
  - 销售价格：299.00元

#### 半成品（2个）
- **手环主板** (ID: 2002)
  - 类型：半成品 (2)
  - 规格：V1.0
  - 销售价格：150.00元

- **手环表带** (ID: 2003)
  - 类型：半成品 (2)
  - 规格：标准
  - 销售价格：20.00元

#### 原材料（8个）
- PCB板 (ID: 2010) - 12.00元
- 主控芯片 (ID: 2004) - 25.00元
- 显示屏 (ID: 2005) - 35.00元
- 电池 (ID: 2006) - 15.00元
- 传感器 (ID: 2007) - 20.00元
- 焊锡 (ID: 2011) - 0.05元/克
- 硅胶材料 (ID: 2008) - 5.00元/米
- 表扣 (ID: 2009) - 3.00元

### 2. BOM配置（3个主表，10个明细）

#### 智能手环BOM (BOM-2001-001)
- 手环主板：1.0000个（损耗率1%，有效用量1.0100）✅ 关键物料
- 手环表带：1.0000个（损耗率0%，有效用量1.0000）

#### 手环主板BOM (BOM-2002-001)
- PCB板：1.0000个（损耗率2%，有效用量1.0200）✅ 关键物料
- 主控芯片：1.0000个（损耗率1%，有效用量1.0100）✅ 关键物料
- 显示屏：1.0000个（损耗率1%，有效用量1.0100）✅ 关键物料
- 电池：1.0000个（损耗率0%，有效用量1.0000）✅ 关键物料
- 传感器：1.0000个（损耗率1%，有效用量1.0100）✅ 关键物料
- 焊锡：5.0000克（损耗率10%，有效用量5.5000克）

#### 手环表带BOM (BOM-2003-001)
- 硅胶材料：0.1500米（损耗率5%，有效用量0.1575米）
- 表扣：1.0000个（损耗率0%，有效用量1.0000）

### 3. 工艺路线配置（3个主表，8个明细）

#### 智能手环工艺路线 (ROUTE-2001-001)
- 工序数：3
  1. 组装（30分钟 + 5分钟准备，2人）
  2. 最终测试（20分钟 + 5分钟准备，1人，需要质检）
  3. 包装（5分钟，1人）

#### 手环主板工艺路线 (ROUTE-2002-001)
- 工序数：3
  1. SMT贴片（30分钟 + 10分钟准备，2人，需要质检）
  2. 回流焊（20分钟 + 5分钟准备，1人）
  3. 功能测试（15分钟 + 5分钟准备，1人，需要质检）

#### 手环表带工艺路线 (ROUTE-2003-001)
- 工序数：2
  1. 注塑成型（20分钟 + 5分钟准备，1人）
  2. 安装表扣（5分钟，1人）

### 4. 生产订单（1个）

- **生产订单号**：PO-20250101-001
- **产品**：智能手环
- **生产数量**：100个
- **已完成数量**：0个
- **计划开始时间**：2025-01-15 08:00:00
- **计划完成时间**：2025-01-20 18:00:00
- **状态**：待开始 (1)
- **优先级**：高 (2)
- **来源类型**：手动创建 (1)

### 5. 设备数据（5个）

- SMT贴片机 (EQ-001) - 工作中心：5001
- 回流焊炉 (EQ-002) - 工作中心：5001
- 注塑机 (EQ-003) - 工作中心：5002
- 组装线 (EQ-004) - 工作中心：5003
- 测试设备 (EQ-005) - 工作中心：5003

### 6. 仓库数据（3个）

- 原材料仓 (ID: 3001)
- 半成品仓 (ID: 3002)
- 成品仓 (ID: 3003)

---

## 🔍 数据验证

### 验证查询结果

#### 1. 产品与BOM关联验证
```sql
SELECT p.name as product_name, p.production_type, bom.bom_no, bom.bom_name 
FROM erp_product p 
LEFT JOIN erp_product_bom bom ON p.id = bom.product_id 
WHERE p.id BETWEEN 2001 AND 2003 AND p.deleted = 0 
ORDER BY p.id;
```

**结果**：
- ✅ 智能手环 → BOM-2001-001
- ✅ 手环主板 → BOM-2002-001
- ✅ 手环表带 → BOM-2003-001

#### 2. 工艺路线验证
```sql
SELECT route.route_no, route.route_name, p.name as product_name, COUNT(item.id) as process_count 
FROM erp_process_route route 
LEFT JOIN erp_product p ON route.product_id = p.id 
LEFT JOIN erp_process_route_item item ON route.id = item.route_id 
WHERE route.id BETWEEN 8001 AND 8003 AND route.deleted = 0 
GROUP BY route.id 
ORDER BY route.id;
```

**结果**：
- ✅ 手环主板工艺路线 → 3道工序
- ✅ 手环表带工艺路线 → 2道工序
- ✅ 智能手环工艺路线 → 3道工序

#### 3. 生产订单验证
```sql
SELECT no, product_name, quantity, status, priority 
FROM erp_production_order 
WHERE no = 'PO-20250101-001' AND deleted = 0;
```

**结果**：
- ✅ 生产订单号：PO-20250101-001
- ✅ 产品：智能手环
- ✅ 数量：100.0000
- ✅ 状态：1（待开始）
- ✅ 优先级：2（高）

---

## 📊 物料需求计算（生产100个智能手环）

### 直接物料需求
- 手环主板：100 × 1.01 = **101个**
- 手环表带：100 × 1.00 = **100个**

### 间接物料需求（从半成品BOM）

**手环主板（101个）所需原材料：**
- PCB板：101 × 1.02 = **104个**
- 主控芯片：101 × 1.01 = **103个**
- 显示屏：101 × 1.01 = **103个**
- 电池：101 × 1.00 = **101个**
- 传感器：101 × 1.01 = **103个**
- 焊锡：101 × 5.5 = **556克**

**手环表带（100个）所需原材料：**
- 硅胶材料：100 × 0.1575 = **16米**
- 表扣：100 × 1.00 = **100个**

---

## 💰 成本分析（单个智能手环）

### 材料成本
- 手环主板材料：108.32元
- 手环表带材料：3.79元
- **总材料成本**：112.11元

### 人工成本
- 手环主板人工：50.00元
- 手环表带人工：10.00元
- 成品组装人工：30.00元
- **总人工成本**：90.00元

### 制造费用
- 手环主板制造费用：30.00元
- 手环表带制造费用：5.00元
- 成品组装制造费用：20.00元
- **总制造费用**：55.00元

### 总成本
- **单个成品总成本**：257.11元
- **100个总成本**：25,711.00元

### 利润分析
- **销售价格**：299.00元/个
- **总成本**：257.11元/个
- **毛利润**：41.89元/个
- **毛利率**：14.01%

---

## ✅ 执行总结

### 成功创建的数据
- ✅ 11个产品（1个成品、2个半成品、8个原材料）
- ✅ 3个BOM主表（智能手环、手环主板、手环表带）
- ✅ 10个BOM明细项
- ✅ 3个工艺路线主表
- ✅ 8个工艺路线明细项（工序）
- ✅ 1个生产订单（PO-20250101-001）
- ✅ 5个设备
- ✅ 3个仓库

### 数据完整性
- ✅ 产品与BOM关联正确
- ✅ 产品与工艺路线关联正确
- ✅ BOM明细配置完整
- ✅ 工艺路线明细配置完整
- ✅ 生产订单创建成功

### 下一步操作建议

1. **物料准备**
   - 检查原材料库存是否充足
   - 如不足，创建采购订单

2. **生产执行**
   - 将生产订单状态从"待开始"变更为"待排产"
   - 根据工艺路线执行生产
   - 记录实际工时和机时

3. **数据查询**
   - 使用说明文档中的查询示例查看数据
   - 验证BOM展开和物料需求计算

4. **系统测试**
   - 测试生产订单管理功能
   - 测试BOM查询功能
   - 测试工艺路线查询功能

---

## 📝 注意事项

1. **租户ID**：所有数据使用租户ID=1，实际使用时请根据系统实际情况调整
2. **数据ID**：Demo数据使用了特定的ID范围，避免与现有数据冲突
3. **状态管理**：生产订单状态为"待开始"，可根据实际业务流程更新
4. **表结构**：部分表（如工作中心表）可能需要根据系统实际情况调整

---

*报告生成时间：2025-01*  
*执行脚本：production-order-demo.sql*  
*数据库：ruoyi-vue-pro*

